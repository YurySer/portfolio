import{r as F,j as H,R as Wn}from"./index-BRo2AvRK.js";import{u as Lr}from"./use-in-view-BsWrmk_M.js";import{c as Ms,a as Is,b as ys,i as Fs,r as Rs,d as Ts,e as bs,f as Or,g as Ds,h as Gs,j as xs,p as _s,s as Ss,V as ws,k as Hs,l as Ls,S as Os,H as Us,v as gn,n as Ps,o as Js,q as Ns,G as ks,m as Gn}from"./proxy-CF9Ib6yz.js";import{R as Ur,T as Ks,a as Jn,b as Pr,c as qt,I as js,S as Ht,D as Jr,V as ee,d as bt,e as Dt,Q as gt,P as Bn,O as Qt,f as pr,g as Oe,h as Qs,i as Xs,L as Vn,j as Xt,F as lt,k as Ve,l as Zs,m as Ys,n as Ws,o as xt,M as ze,p as Vs,q as zs,r as Cn,s as qs,t as $s,B as Zt,v as ea,w as Se,x as Nr,y as Nn,z as ta,A as xn,E as na,G as kr,H as ra,J as Kr,K as sa,N as aa,U as ia,W as oa,X as ca,Y as _n,Z as Yt,$ as la,a0 as ua,a1 as Aa,a2 as jr,a3 as Ct,a4 as kn,a5 as ha,a6 as da,a7 as fa,a8 as tt,a9 as ma,aa as pa,ab as Ba,ac as ga,ad as ot,ae as Br,af as gr,ag as Cr,ah as zn,ai as Qr,aj as Ca,ak as Xr,al as we,am as We,an as _t,ao as Vt,ap as va,aq as Ea,ar as vt,as as pe,at as Et,au as Ma,u as Mt,_ as Ye,av as Ia,aw as Zr,ax as qn,ay as vn,az as ya,aA as Fa,aB as Kn,aC as Ra,aD as Ta,aE as ba,aF as Da,aG as jn,aH as Ga,aI as vr,aJ as xa,aK as _a,aL as Sa,aM as wa,aN as Ha,aO as La,aP as Oa,aQ as Yr,aR as Er,aS as Ua,aT as Pa,C as $n}from"./extends-DUhx1brl.js";function Ja(i,e=100,n){const t=n({...i,keyframes:[0,e]}),r=Math.min(Ms(t),Is);return{type:"keyframes",ease:s=>t.next(r*s).value/e,duration:ys(r)}}const Na=(i,e,n)=>{const t=e-i;return((n-i)%t+t)%t+i};function Wr(i,e){return Fs(i)?i[Na(0,i.length,e)]:i}function er(i){return typeof i=="object"&&!Array.isArray(i)}function Vr(i,e,n,t){return typeof i=="string"&&er(e)?Rs(i,n,t):i instanceof NodeList?Array.from(i):Array.isArray(i)?i:[i]}function ka(i,e,n){return i*(e+1)}function Mr(i,e,n,t){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,i+parseFloat(e)):e==="<"?n:(r=t.get(e))!==null&&r!==void 0?r:i}function Ka(i,e,n){for(let t=0;t<i.length;t++){const r=i[t];r.at>e&&r.at<n&&(bs(i,r),t--)}}function ja(i,e,n,t,r,s){Ka(i,r,s);for(let a=0;a<e.length;a++)i.push({value:e[a],at:Ts(r,s,t[a]),easing:Wr(n,a)})}function Qa(i,e){for(let n=0;n<i.length;n++)i[n]=i[n]/(e+1)}function Xa(i,e){return i.at===e.at?i.value===null?1:e.value===null?-1:0:i.at-e.at}const Za="easeInOut";function Ya(i,{defaultTransition:e={},...n}={},t,r){const s=e.duration||.3,a=new Map,l=new Map,c={},u=new Map;let d=0,h=0,f=0;for(let B=0;B<i.length;B++){const C=i[B];if(typeof C=="string"){u.set(C,h);continue}else if(!Array.isArray(C)){u.set(C.name,Mr(h,C.at,d,u));continue}let[v,g,I={}]=C;I.at!==void 0&&(h=Mr(h,I.at,d,u));let y=0;const S=(x,b,E,_=0,D=0)=>{const G=Wa(x),{delay:O=0,times:Z=Ds(G),type:z="keyframes",repeat:V,repeatType:j,repeatDelay:ne=0,...q}=b;let{ease:Ae=e.ease||"easeOut",duration:ce}=b;const Ie=typeof O=="function"?O(_,D):O,se=G.length,Me=Gs(z)?z:r==null?void 0:r[z];if(se<=2&&Me){let He=100;if(se===2&&qa(G)){const Re=G[1]-G[0];He=Math.abs(Re)}const ae={...q};ce!==void 0&&(ae.duration=Ss(ce));const De=Ja(ae,He,Me);Ae=De.ease,ce=De.duration}ce??(ce=s);const le=h+Ie;Z.length===1&&Z[0]===0&&(Z[1]=1);const Ce=Z.length-G.length;if(Ce>0&&xs(Z,Ce),G.length===1&&G.unshift(null),V){ce=ka(ce,V);const He=[...G],ae=[...Z];Ae=Array.isArray(Ae)?[...Ae]:[Ae];const De=[...Ae];for(let Re=0;Re<V;Re++){G.push(...He);for(let qe=0;qe<He.length;qe++)Z.push(ae[qe]+(Re+1)),Ae.push(qe===0?"linear":Wr(De,qe-1))}Qa(Z,V)}const be=le+ce;ja(E,G,Ae,Z,le,be),y=Math.max(Ie+ce,y),f=Math.max(be,f)};if(Or(v)){const x=Ir(v,l);S(g,I,yr("default",x))}else{const x=Vr(v,g,t,c),b=x.length;for(let E=0;E<b;E++){g=g,I=I;const _=x[E],D=Ir(_,l);for(const G in g)S(g[G],Va(I,G),yr(G,D),E,b)}}d=h,h+=y}return l.forEach((B,C)=>{for(const v in B){const g=B[v];g.sort(Xa);const I=[],y=[],S=[];for(let b=0;b<g.length;b++){const{at:E,value:_,easing:D}=g[b];I.push(_),y.push(_s(0,f,E)),S.push(D||"easeOut")}y[0]!==0&&(y.unshift(0),I.unshift(I[0]),S.unshift(Za)),y[y.length-1]!==1&&(y.push(1),I.push(null)),a.has(C)||a.set(C,{keyframes:{},transition:{}});const x=a.get(C);x.keyframes[v]=I,x.transition[v]={...e,duration:f,ease:S,times:y,...n}}}),a}function Ir(i,e){return!e.has(i)&&e.set(i,{}),e.get(i)}function yr(i,e){return e[i]||(e[i]=[]),e[i]}function Wa(i){return Array.isArray(i)?i:[i]}function Va(i,e){return i&&i[e]?{...i,...i[e]}:{...i}}const za=i=>typeof i=="number",qa=i=>i.every(za);function $a(i,e){return i in e}class ei extends ws{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,n){if($a(n,e)){const t=e[n];if(typeof t=="string"||typeof t=="number")return t}}getBaseTargetFromProps(){}removeValueFromRenderState(e,n){delete n.output[e]}measureInstanceViewportBox(){return Hs()}build(e,n){Object.assign(e.output,n)}renderInstance(e,{output:n}){Object.assign(e,n)}sortInstanceNodePosition(){return 0}}function ti(i){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=Ls(i)?new Os(e):new Us(e);n.mount(i),gn.set(i,n)}function ni(i){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new ei(e);n.mount(i),gn.set(i,n)}function ri(i,e){return Or(i)||typeof i=="number"||typeof i=="string"&&!er(e)}function zr(i,e,n,t){const r=[];if(ri(i,e))r.push(Ps(i,er(e)&&e.default||e,n&&(n.default||n)));else{const s=Vr(i,e,t),a=s.length;for(let l=0;l<a;l++){const c=s[l],u=c instanceof Element?ti:ni;gn.has(c)||u(c);const d=gn.get(c),h={...n};"delay"in h&&typeof h.delay=="function"&&(h.delay=h.delay(l,a)),r.push(...Js(d,{...e,transition:h},{}))}}return r}function si(i,e,n){const t=[];return Ya(i,e,n,{spring:Ns}).forEach(({keyframes:s,transition:a},l)=>{t.push(...zr(l,s,a))}),t}function ai(i){return Array.isArray(i)&&i.some(Array.isArray)}function ii(i){function e(n,t,r){let s=[];return ai(n)?s=si(n,t,i):s=zr(n,t,r,i),new ks(s)}return e}const oi=ii(),tr=parseInt(Ur.replace(/\D+/g,""));function Fr(i,e){if(e===Ks)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===Jn||e===Pr){let n=i.getIndex();if(n===null){const a=[],l=i.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)a.push(c);i.setIndex(a),n=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const t=n.count-2,r=[];if(n)if(e===Jn)for(let a=1;a<=t;a++)r.push(n.getX(0)),r.push(n.getX(a)),r.push(n.getX(a+1));else for(let a=0;a<t;a++)a%2===0?(r.push(n.getX(a)),r.push(n.getX(a+1)),r.push(n.getX(a+2))):(r.push(n.getX(a+2)),r.push(n.getX(a+1)),r.push(n.getX(a)));r.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var ke=Uint8Array,ct=Uint16Array,Qn=Uint32Array,qr=new ke([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$r=new ke([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ci=new ke([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),es=function(i,e){for(var n=new ct(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new Qn(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return[n,r]},ts=es(qr,2),ns=ts[0],li=ts[1];ns[28]=258,li[258]=28;var ui=es($r,0),Ai=ui[0],Xn=new ct(32768);for(var ge=0;ge<32768;++ge){var at=(ge&43690)>>>1|(ge&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,Xn[ge]=((at&65280)>>>8|(at&255)<<8)>>>1}var Wt=function(i,e,n){for(var t=i.length,r=0,s=new ct(e);r<t;++r)++s[i[r]-1];var a=new ct(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var l;if(n){l=new ct(1<<e);var c=15-e;for(r=0;r<t;++r)if(i[r])for(var u=r<<4|i[r],d=e-i[r],h=a[i[r]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)l[Xn[h]>>>c]=u}else for(l=new ct(t),r=0;r<t;++r)i[r]&&(l[r]=Xn[a[i[r]-1]++]>>>15-i[r]);return l},$t=new ke(288);for(var ge=0;ge<144;++ge)$t[ge]=8;for(var ge=144;ge<256;++ge)$t[ge]=9;for(var ge=256;ge<280;++ge)$t[ge]=7;for(var ge=280;ge<288;++ge)$t[ge]=8;var rs=new ke(32);for(var ge=0;ge<32;++ge)rs[ge]=5;var hi=Wt($t,9,1),di=Wt(rs,5,1),Sn=function(i){for(var e=i[0],n=1;n<i.length;++n)i[n]>e&&(e=i[n]);return e},Qe=function(i,e,n){var t=e/8|0;return(i[t]|i[t+1]<<8)>>(e&7)&n},wn=function(i,e){var n=e/8|0;return(i[n]|i[n+1]<<8|i[n+2]<<16)>>(e&7)},fi=function(i){return(i/8|0)+(i&7&&1)},mi=function(i,e,n){(n==null||n>i.length)&&(n=i.length);var t=new(i instanceof ct?ct:i instanceof Qn?Qn:ke)(n-e);return t.set(i.subarray(e,n)),t},pi=function(i,e,n){var t=i.length;if(!t||n&&!n.l&&t<5)return e||new ke(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new ke(t*3));var a=function(ae){var De=e.length;if(ae>De){var Re=new ke(Math.max(De*2,ae));Re.set(e),e=Re}},l=n.f||0,c=n.p||0,u=n.b||0,d=n.l,h=n.d,f=n.m,B=n.n,C=t*8;do{if(!d){n.f=l=Qe(i,c,1);var v=Qe(i,c+1,3);if(c+=3,v)if(v==1)d=hi,h=di,f=9,B=5;else if(v==2){var S=Qe(i,c,31)+257,x=Qe(i,c+10,15)+4,b=S+Qe(i,c+5,31)+1;c+=14;for(var E=new ke(b),_=new ke(19),D=0;D<x;++D)_[ci[D]]=Qe(i,c+D*3,7);c+=x*3;for(var G=Sn(_),O=(1<<G)-1,Z=Wt(_,G,1),D=0;D<b;){var z=Z[Qe(i,c,O)];c+=z&15;var g=z>>>4;if(g<16)E[D++]=g;else{var V=0,j=0;for(g==16?(j=3+Qe(i,c,3),c+=2,V=E[D-1]):g==17?(j=3+Qe(i,c,7),c+=3):g==18&&(j=11+Qe(i,c,127),c+=7);j--;)E[D++]=V}}var ne=E.subarray(0,S),q=E.subarray(S);f=Sn(ne),B=Sn(q),d=Wt(ne,f,1),h=Wt(q,B,1)}else throw"invalid block type";else{var g=fi(c)+4,I=i[g-4]|i[g-3]<<8,y=g+I;if(y>t){if(s)throw"unexpected EOF";break}r&&a(u+I),e.set(i.subarray(g,y),u),n.b=u+=I,n.p=c=y*8;continue}if(c>C){if(s)throw"unexpected EOF";break}}r&&a(u+131072);for(var Ae=(1<<f)-1,ce=(1<<B)-1,Ie=c;;Ie=c){var V=d[wn(i,c)&Ae],se=V>>>4;if(c+=V&15,c>C){if(s)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(se<256)e[u++]=se;else if(se==256){Ie=c,d=null;break}else{var Me=se-254;if(se>264){var D=se-257,le=qr[D];Me=Qe(i,c,(1<<le)-1)+ns[D],c+=le}var Ce=h[wn(i,c)&ce],be=Ce>>>4;if(!Ce)throw"invalid distance";c+=Ce&15;var q=Ai[be];if(be>3){var le=$r[be];q+=wn(i,c)&(1<<le)-1,c+=le}if(c>C){if(s)throw"unexpected EOF";break}r&&a(u+131072);for(var He=u+Me;u<He;u+=4)e[u]=e[u-q],e[u+1]=e[u+1-q],e[u+2]=e[u+2-q],e[u+3]=e[u+3-q];u=He}}n.l=d,n.p=Ie,n.b=u,d&&(l=1,n.m=f,n.d=h,n.n=B)}while(!l);return u==e.length?e:mi(e,0,u)},Bi=new ke(0),gi=function(i){if((i[0]&15)!=8||i[0]>>>4>7||(i[0]<<8|i[1])%31)throw"invalid zlib data";if(i[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function hn(i,e){return pi((gi(i),i.subarray(2,-4)),e)}var Ci=typeof TextDecoder<"u"&&new TextDecoder,vi=0;try{Ci.decode(Bi,{stream:!0}),vi=1}catch{}const Ei=i=>i&&i.isCubeTexture;class Mi extends qt{constructor(e,n){var t,r;const s=Ei(e),l=((r=s?(t=e.image[0])==null?void 0:t.width:e.image.width)!=null?r:1024)/4,c=Math.floor(Math.log2(l)),u=Math.pow(2,c),d=3*Math.max(u,16*7),h=4*u,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${c}.0`],B=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,C=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${tr>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,v={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},g=new js(1,16),I=new Ht({uniforms:v,fragmentShader:C,vertexShader:B,side:Jr});super(g,I)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ii=Object.defineProperty,yi=(i,e,n)=>e in i?Ii(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,Fi=(i,e,n)=>(yi(i,e+"",n),n);class Ri{constructor(){Fi(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(n)===-1&&t[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var Ti=Object.defineProperty,bi=(i,e,n)=>e in i?Ti(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,W=(i,e,n)=>(bi(i,typeof e!="symbol"?e+"":e,n),n);const dn=new Qs,Rr=new Xs,Di=Math.cos(70*(Math.PI/180)),Tr=(i,e)=>(i%e+e)%e;let Gi=class extends Ri{constructor(e,n){super(),W(this,"object"),W(this,"domElement"),W(this,"enabled",!0),W(this,"target",new ee),W(this,"minDistance",0),W(this,"maxDistance",1/0),W(this,"minZoom",0),W(this,"maxZoom",1/0),W(this,"minPolarAngle",0),W(this,"maxPolarAngle",Math.PI),W(this,"minAzimuthAngle",-1/0),W(this,"maxAzimuthAngle",1/0),W(this,"enableDamping",!1),W(this,"dampingFactor",.05),W(this,"enableZoom",!0),W(this,"zoomSpeed",1),W(this,"enableRotate",!0),W(this,"rotateSpeed",1),W(this,"enablePan",!0),W(this,"panSpeed",1),W(this,"screenSpacePanning",!0),W(this,"keyPanSpeed",7),W(this,"zoomToCursor",!1),W(this,"autoRotate",!1),W(this,"autoRotateSpeed",2),W(this,"reverseOrbit",!1),W(this,"reverseHorizontalOrbit",!1),W(this,"reverseVerticalOrbit",!1),W(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),W(this,"mouseButtons",{LEFT:bt.ROTATE,MIDDLE:bt.DOLLY,RIGHT:bt.PAN}),W(this,"touches",{ONE:Dt.ROTATE,TWO:Dt.DOLLY_PAN}),W(this,"target0"),W(this,"position0"),W(this,"zoom0"),W(this,"_domElementKeyEvents",null),W(this,"getPolarAngle"),W(this,"getAzimuthalAngle"),W(this,"setPolarAngle"),W(this,"setAzimuthalAngle"),W(this,"getDistance"),W(this,"getZoomScale"),W(this,"listenToKeyEvents"),W(this,"stopListenToKeyEvents"),W(this,"saveState"),W(this,"reset"),W(this,"update"),W(this,"connect"),W(this,"dispose"),W(this,"dollyIn"),W(this,"dollyOut"),W(this,"getScale"),W(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=p=>{let L=Tr(p,2*Math.PI),Q=d.phi;Q<0&&(Q+=2*Math.PI),L<0&&(L+=2*Math.PI);let oe=Math.abs(L-Q);2*Math.PI-oe<oe&&(L<Q?L+=2*Math.PI:Q+=2*Math.PI),h.phi=L-Q,t.update()},this.setAzimuthalAngle=p=>{let L=Tr(p,2*Math.PI),Q=d.theta;Q<0&&(Q+=2*Math.PI),L<0&&(L+=2*Math.PI);let oe=Math.abs(L-Q);2*Math.PI-oe<oe&&(L<Q?L+=2*Math.PI:Q+=2*Math.PI),h.theta=L-Q,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=p=>{p.addEventListener("keydown",yt),this._domElementKeyEvents=p},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",yt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(r),t.update(),c=l.NONE},this.update=(()=>{const p=new ee,L=new ee(0,1,0),Q=new gt().setFromUnitVectors(e.up,L),oe=Q.clone().invert(),P=new ee,xe=new gt,Xe=2*Math.PI;return function(){const un=t.object.position;Q.setFromUnitVectors(e.up,L),oe.copy(Q).invert(),p.copy(un).sub(t.target),p.applyQuaternion(Q),d.setFromVector3(p),t.autoRotate&&c===l.NONE&&j(z()),t.enableDamping?(d.theta+=h.theta*t.dampingFactor,d.phi+=h.phi*t.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let Ke=t.minAzimuthAngle,je=t.maxAzimuthAngle;isFinite(Ke)&&isFinite(je)&&(Ke<-Math.PI?Ke+=Xe:Ke>Math.PI&&(Ke-=Xe),je<-Math.PI?je+=Xe:je>Math.PI&&(je-=Xe),Ke<=je?d.theta=Math.max(Ke,Math.min(je,d.theta)):d.theta=d.theta>(Ke+je)/2?Math.max(Ke,d.theta):Math.min(je,d.theta)),d.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,d.phi)),d.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(B,t.dampingFactor):t.target.add(B),t.zoomToCursor&&G||t.object.isOrthographicCamera?d.radius=Ce(d.radius):d.radius=Ce(d.radius*f),p.setFromSpherical(d),p.applyQuaternion(oe),un.copy(t.target).add(p),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(h.theta*=1-t.dampingFactor,h.phi*=1-t.dampingFactor,B.multiplyScalar(1-t.dampingFactor)):(h.set(0,0,0),B.set(0,0,0));let ht=!1;if(t.zoomToCursor&&G){let dt=null;if(t.object instanceof Bn&&t.object.isPerspectiveCamera){const ft=p.length();dt=Ce(ft*f);const Tt=ft-dt;t.object.position.addScaledVector(_,Tt),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const ft=new ee(D.x,D.y,0);ft.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/f)),t.object.updateProjectionMatrix(),ht=!0;const Tt=new ee(D.x,D.y,0);Tt.unproject(t.object),t.object.position.sub(Tt).add(ft),t.object.updateMatrixWorld(),dt=p.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;dt!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(dt).add(t.object.position):(dn.origin.copy(t.object.position),dn.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(dn.direction))<Di?e.lookAt(t.target):(Rr.setFromNormalAndCoplanarPoint(t.object.up,t.target),dn.intersectPlane(Rr,t.target))))}else t.object instanceof Qt&&t.object.isOrthographicCamera&&(ht=f!==1,ht&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/f)),t.object.updateProjectionMatrix()));return f=1,G=!1,ht||P.distanceToSquared(t.object.position)>u||8*(1-xe.dot(t.object.quaternion))>u?(t.dispatchEvent(r),P.copy(t.object.position),xe.copy(t.object.quaternion),ht=!1,!0):!1}})(),this.connect=p=>{t.domElement=p,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",ln),t.domElement.addEventListener("pointerdown",on),t.domElement.addEventListener("pointercancel",ut),t.domElement.addEventListener("wheel",cn)},this.dispose=()=>{var p,L,Q,oe,P,xe;t.domElement&&(t.domElement.style.touchAction="auto"),(p=t.domElement)==null||p.removeEventListener("contextmenu",ln),(L=t.domElement)==null||L.removeEventListener("pointerdown",on),(Q=t.domElement)==null||Q.removeEventListener("pointercancel",ut),(oe=t.domElement)==null||oe.removeEventListener("wheel",cn),(P=t.domElement)==null||P.ownerDocument.removeEventListener("pointermove",It),(xe=t.domElement)==null||xe.ownerDocument.removeEventListener("pointerup",ut),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",yt)};const t=this,r={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const u=1e-6,d=new pr,h=new pr;let f=1;const B=new ee,C=new Oe,v=new Oe,g=new Oe,I=new Oe,y=new Oe,S=new Oe,x=new Oe,b=new Oe,E=new Oe,_=new ee,D=new Oe;let G=!1;const O=[],Z={};function z(){return 2*Math.PI/60/60*t.autoRotateSpeed}function V(){return Math.pow(.95,t.zoomSpeed)}function j(p){t.reverseOrbit||t.reverseHorizontalOrbit?h.theta+=p:h.theta-=p}function ne(p){t.reverseOrbit||t.reverseVerticalOrbit?h.phi+=p:h.phi-=p}const q=(()=>{const p=new ee;return function(Q,oe){p.setFromMatrixColumn(oe,0),p.multiplyScalar(-Q),B.add(p)}})(),Ae=(()=>{const p=new ee;return function(Q,oe){t.screenSpacePanning===!0?p.setFromMatrixColumn(oe,1):(p.setFromMatrixColumn(oe,0),p.crossVectors(t.object.up,p)),p.multiplyScalar(Q),B.add(p)}})(),ce=(()=>{const p=new ee;return function(Q,oe){const P=t.domElement;if(P&&t.object instanceof Bn&&t.object.isPerspectiveCamera){const xe=t.object.position;p.copy(xe).sub(t.target);let Xe=p.length();Xe*=Math.tan(t.object.fov/2*Math.PI/180),q(2*Q*Xe/P.clientHeight,t.object.matrix),Ae(2*oe*Xe/P.clientHeight,t.object.matrix)}else P&&t.object instanceof Qt&&t.object.isOrthographicCamera?(q(Q*(t.object.right-t.object.left)/t.object.zoom/P.clientWidth,t.object.matrix),Ae(oe*(t.object.top-t.object.bottom)/t.object.zoom/P.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function Ie(p){t.object instanceof Bn&&t.object.isPerspectiveCamera||t.object instanceof Qt&&t.object.isOrthographicCamera?f=p:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function se(p){Ie(f/p)}function Me(p){Ie(f*p)}function le(p){if(!t.zoomToCursor||!t.domElement)return;G=!0;const L=t.domElement.getBoundingClientRect(),Q=p.clientX-L.left,oe=p.clientY-L.top,P=L.width,xe=L.height;D.x=Q/P*2-1,D.y=-(oe/xe)*2+1,_.set(D.x,D.y,1).unproject(t.object).sub(t.object.position).normalize()}function Ce(p){return Math.max(t.minDistance,Math.min(t.maxDistance,p))}function be(p){C.set(p.clientX,p.clientY)}function He(p){le(p),x.set(p.clientX,p.clientY)}function ae(p){I.set(p.clientX,p.clientY)}function De(p){v.set(p.clientX,p.clientY),g.subVectors(v,C).multiplyScalar(t.rotateSpeed);const L=t.domElement;L&&(j(2*Math.PI*g.x/L.clientHeight),ne(2*Math.PI*g.y/L.clientHeight)),C.copy(v),t.update()}function Re(p){b.set(p.clientX,p.clientY),E.subVectors(b,x),E.y>0?se(V()):E.y<0&&Me(V()),x.copy(b),t.update()}function qe(p){y.set(p.clientX,p.clientY),S.subVectors(y,I).multiplyScalar(t.panSpeed),ce(S.x,S.y),I.copy(y),t.update()}function In(p){le(p),p.deltaY<0?Me(V()):p.deltaY>0&&se(V()),t.update()}function en(p){let L=!1;switch(p.code){case t.keys.UP:ce(0,t.keyPanSpeed),L=!0;break;case t.keys.BOTTOM:ce(0,-t.keyPanSpeed),L=!0;break;case t.keys.LEFT:ce(t.keyPanSpeed,0),L=!0;break;case t.keys.RIGHT:ce(-t.keyPanSpeed,0),L=!0;break}L&&(p.preventDefault(),t.update())}function tn(){if(O.length==1)C.set(O[0].pageX,O[0].pageY);else{const p=.5*(O[0].pageX+O[1].pageX),L=.5*(O[0].pageY+O[1].pageY);C.set(p,L)}}function Lt(){if(O.length==1)I.set(O[0].pageX,O[0].pageY);else{const p=.5*(O[0].pageX+O[1].pageX),L=.5*(O[0].pageY+O[1].pageY);I.set(p,L)}}function Ot(){const p=O[0].pageX-O[1].pageX,L=O[0].pageY-O[1].pageY,Q=Math.sqrt(p*p+L*L);x.set(0,Q)}function nn(){t.enableZoom&&Ot(),t.enablePan&&Lt()}function yn(){t.enableZoom&&Ot(),t.enableRotate&&tn()}function rn(p){if(O.length==1)v.set(p.pageX,p.pageY);else{const Q=Rt(p),oe=.5*(p.pageX+Q.x),P=.5*(p.pageY+Q.y);v.set(oe,P)}g.subVectors(v,C).multiplyScalar(t.rotateSpeed);const L=t.domElement;L&&(j(2*Math.PI*g.x/L.clientHeight),ne(2*Math.PI*g.y/L.clientHeight)),C.copy(v)}function sn(p){if(O.length==1)y.set(p.pageX,p.pageY);else{const L=Rt(p),Q=.5*(p.pageX+L.x),oe=.5*(p.pageY+L.y);y.set(Q,oe)}S.subVectors(y,I).multiplyScalar(t.panSpeed),ce(S.x,S.y),I.copy(y)}function an(p){const L=Rt(p),Q=p.pageX-L.x,oe=p.pageY-L.y,P=Math.sqrt(Q*Q+oe*oe);b.set(0,P),E.set(0,Math.pow(b.y/x.y,t.zoomSpeed)),se(E.y),x.copy(b)}function Fn(p){t.enableZoom&&an(p),t.enablePan&&sn(p)}function Rn(p){t.enableZoom&&an(p),t.enableRotate&&rn(p)}function on(p){var L,Q;t.enabled!==!1&&(O.length===0&&((L=t.domElement)==null||L.ownerDocument.addEventListener("pointermove",It),(Q=t.domElement)==null||Q.ownerDocument.addEventListener("pointerup",ut)),Dn(p),p.pointerType==="touch"?Ft(p):Ut(p))}function It(p){t.enabled!==!1&&(p.pointerType==="touch"?bn(p):Tn(p))}function ut(p){var L,Q,oe;At(p),O.length===0&&((L=t.domElement)==null||L.releasePointerCapture(p.pointerId),(Q=t.domElement)==null||Q.ownerDocument.removeEventListener("pointermove",It),(oe=t.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",ut)),t.dispatchEvent(a),c=l.NONE}function Ut(p){let L;switch(p.button){case 0:L=t.mouseButtons.LEFT;break;case 1:L=t.mouseButtons.MIDDLE;break;case 2:L=t.mouseButtons.RIGHT;break;default:L=-1}switch(L){case bt.DOLLY:if(t.enableZoom===!1)return;He(p),c=l.DOLLY;break;case bt.ROTATE:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enablePan===!1)return;ae(p),c=l.PAN}else{if(t.enableRotate===!1)return;be(p),c=l.ROTATE}break;case bt.PAN:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enableRotate===!1)return;be(p),c=l.ROTATE}else{if(t.enablePan===!1)return;ae(p),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&t.dispatchEvent(s)}function Tn(p){if(t.enabled!==!1)switch(c){case l.ROTATE:if(t.enableRotate===!1)return;De(p);break;case l.DOLLY:if(t.enableZoom===!1)return;Re(p);break;case l.PAN:if(t.enablePan===!1)return;qe(p);break}}function cn(p){t.enabled===!1||t.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(p.preventDefault(),t.dispatchEvent(s),In(p),t.dispatchEvent(a))}function yt(p){t.enabled===!1||t.enablePan===!1||en(p)}function Ft(p){switch(Te(p),O.length){case 1:switch(t.touches.ONE){case Dt.ROTATE:if(t.enableRotate===!1)return;tn(),c=l.TOUCH_ROTATE;break;case Dt.PAN:if(t.enablePan===!1)return;Lt(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(t.touches.TWO){case Dt.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;nn(),c=l.TOUCH_DOLLY_PAN;break;case Dt.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;yn(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&t.dispatchEvent(s)}function bn(p){switch(Te(p),c){case l.TOUCH_ROTATE:if(t.enableRotate===!1)return;rn(p),t.update();break;case l.TOUCH_PAN:if(t.enablePan===!1)return;sn(p),t.update();break;case l.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Fn(p),t.update();break;case l.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;Rn(p),t.update();break;default:c=l.NONE}}function ln(p){t.enabled!==!1&&p.preventDefault()}function Dn(p){O.push(p)}function At(p){delete Z[p.pointerId];for(let L=0;L<O.length;L++)if(O[L].pointerId==p.pointerId){O.splice(L,1);return}}function Te(p){let L=Z[p.pointerId];L===void 0&&(L=new Oe,Z[p.pointerId]=L),L.set(p.pageX,p.pageY)}function Rt(p){const L=p.pointerId===O[0].pointerId?O[1]:O[0];return Z[L.pointerId]}this.dollyIn=(p=V())=>{Me(p),t.update()},this.dollyOut=(p=V())=>{se(p),t.update()},this.getScale=()=>f,this.setScale=p=>{Ie(p),t.update()},this.getZoomScale=()=>V(),n!==void 0&&this.connect(n),this.update()}};function En(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let n=0,t=i.length;n<t;n++)e+=String.fromCharCode(i[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const Bt="srgb",nt="srgb-linear",br=3001,xi=3e3;class nr extends Vn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Li(n)}),this.register(function(n){return new Oi(n)}),this.register(function(n){return new Xi(n)}),this.register(function(n){return new Zi(n)}),this.register(function(n){return new Yi(n)}),this.register(function(n){return new Pi(n)}),this.register(function(n){return new Ji(n)}),this.register(function(n){return new Ni(n)}),this.register(function(n){return new ki(n)}),this.register(function(n){return new Hi(n)}),this.register(function(n){return new Ki(n)}),this.register(function(n){return new Ui(n)}),this.register(function(n){return new Qi(n)}),this.register(function(n){return new ji(n)}),this.register(function(n){return new Si(n)}),this.register(function(n){return new Wi(n)}),this.register(function(n){return new Vi(n)})}load(e,n,t,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const u=Xt.extractUrlBase(e);a=Xt.resolveURL(u,this.path)}else a=Xt.extractUrlBase(e);this.manager.itemStart(e);const l=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},c=new lt(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(u){try{s.parse(u,a,function(d){n(d),s.manager.itemEnd(e)},l)}catch(d){l(d)}},t,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,r){let s;const a={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(En(new Uint8Array(e.slice(0,4)))===ss){try{a[re.KHR_BINARY_GLTF]=new zi(e)}catch(d){r&&r(d);return}s=JSON.parse(a[re.KHR_BINARY_GLTF].content)}else s=JSON.parse(En(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new uo(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[d.name]=d,a[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case re.KHR_MATERIALS_UNLIT:a[d]=new wi;break;case re.KHR_DRACO_MESH_COMPRESSION:a[d]=new qi(s,this.dracoLoader);break;case re.KHR_TEXTURE_TRANSFORM:a[d]=new $i;break;case re.KHR_MESH_QUANTIZATION:a[d]=new eo;break;default:h.indexOf(d)>=0&&l[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(a),c.setPlugins(l),c.parse(t,r)}parseAsync(e,n){const t=this;return new Promise(function(r,s){t.parse(e,n,r,s)})}}function _i(){let i={};return{get:function(e){return i[e]},add:function(e,n){i[e]=n},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const re={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Si{constructor(e){this.parser=e,this.name=re.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let t=0,r=n.length;t<r;t++){const s=n[t];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,t="light:"+e;let r=n.cache.get(t);if(r)return r;const s=n.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const d=new Ve(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],nt);const h=c.range!==void 0?c.range:0;switch(c.type){case"directional":u=new Ws(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Ys(d),u.distance=h;break;case"spot":u=new Zs(d),u.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,u.angle=c.spot.outerConeAngle,u.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return u.position.set(0,0,0),u.decay=2,et(u,c),c.intensity!==void 0&&(u.intensity=c.intensity),u.name=n.createUniqueName(c.name||"light_"+e),r=Promise.resolve(u),n.cache.add(t,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,t=this.parser,s=t.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return t._getNodeRef(n.cache,l,c)})}}class wi{constructor(){this.name=re.KHR_MATERIALS_UNLIT}getMaterialType(){return xt}extendParams(e,n,t){const r=[];e.color=new Ve(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],nt),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(t.assignTexture(e,"map",s.baseColorTexture,Bt))}return Promise.all(r)}}class Hi{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class Li{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(n.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(t.assignTexture(n,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(t.assignTexture(n,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(t.assignTexture(n,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new Oe(l,l)}return Promise.all(s)}}class Oi{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Ui{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(n.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(t.assignTexture(n,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(n.iridescenceIOR=a.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(t.assignTexture(n,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class Pi{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new Ve(0,0,0),n.sheenRoughness=0,n.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;n.sheenColor.setRGB(l[0],l[1],l[2],nt)}return a.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(t.assignTexture(n,"sheenColorMap",a.sheenColorTexture,Bt)),a.sheenRoughnessTexture!==void 0&&s.push(t.assignTexture(n,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class Ji{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(n.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(t.assignTexture(n,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class Ni{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];n.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(t.assignTexture(n,"thicknessMap",a.thicknessTexture)),n.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return n.attenuationColor=new Ve().setRGB(l[0],l[1],l[2],nt),Promise.all(s)}}class ki{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Ki{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];n.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(t.assignTexture(n,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return n.specularColor=new Ve().setRGB(l[0],l[1],l[2],nt),a.specularColorTexture!==void 0&&s.push(t.assignTexture(n,"specularColorMap",a.specularColorTexture,Bt)),Promise.all(s)}}class ji{constructor(e){this.parser=e,this.name=re.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return n.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(t.assignTexture(n,"bumpMap",a.bumpTexture)),Promise.all(s)}}class Qi{constructor(e){this.parser=e,this.name=re.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:ze}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(n.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(n.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(t.assignTexture(n,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class Xi{constructor(e){this.parser=e,this.name=re.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,t=n.json,r=t.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=n.options.ktx2Loader;if(!a){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,a)}}class Zi{constructor(e){this.parser=e,this.name=re.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,r=t.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const a=s.extensions[n],l=r.images[a.source];let c=t.textureLoader;if(l.uri){const u=t.options.manager.getHandler(l.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return t.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Yi{constructor(e){this.parser=e,this.name=re.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,r=t.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const a=s.extensions[n],l=r.images[a.source];let c=t.textureLoader;if(l.uri){const u=t.options.manager.getHandler(l.uri);u!==null&&(c=u)}return this.detectSupport().then(function(u){if(u)return t.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Wi{constructor(e){this.name=re.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,t=n.bufferViews[e];if(t.extensions&&t.extensions[this.name]){const r=t.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const c=r.byteOffset||0,u=r.byteLength||0,d=r.count,h=r.byteStride,f=new Uint8Array(l,c,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,h,f,r.mode,r.filter).then(function(B){return B.buffer}):a.ready.then(function(){const B=new ArrayBuffer(d*h);return a.decodeGltfBuffer(new Uint8Array(B),d,h,f,r.mode,r.filter),B})})}else return null}}class Vi{constructor(e){this.name=re.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,t=n.nodes[e];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;const r=n.meshes[t.mesh];for(const u of r.primitives)if(u.mode!==Ne.TRIANGLES&&u.mode!==Ne.TRIANGLE_STRIP&&u.mode!==Ne.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=t.extensions[this.name].attributes,l=[],c={};for(const u in a)l.push(this.parser.getDependency("accessor",a[u]).then(d=>(c[u]=d,c[u])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(u=>{const d=u.pop(),h=d.isGroup?d.children:[d],f=u[0].count,B=[];for(const C of h){const v=new Ct,g=new ee,I=new gt,y=new ee(1,1,1),S=new Vs(C.geometry,C.material,f);for(let x=0;x<f;x++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,x),c.ROTATION&&I.fromBufferAttribute(c.ROTATION,x),c.SCALE&&y.fromBufferAttribute(c.SCALE,x),S.setMatrixAt(x,v.compose(g,I,y));for(const x in c)if(x==="_COLOR_0"){const b=c[x];S.instanceColor=new zs(b.array,b.itemSize,b.normalized)}else x!=="TRANSLATION"&&x!=="ROTATION"&&x!=="SCALE"&&C.geometry.setAttribute(x,c[x]);Cn.prototype.copy.call(S,C),this.parser.assignFinalMaterial(S),B.push(S)}return d.isGroup?(d.clear(),d.add(...B),d):B[0]}))}}const ss="glTF",kt=12,Dr={JSON:1313821514,BIN:5130562};class zi{constructor(e){this.name=re.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,kt);if(this.header={magic:En(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==ss)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-kt,r=new DataView(e,kt);let s=0;for(;s<t;){const a=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===Dr.JSON){const c=new Uint8Array(e,kt+s,a);this.content=En(c)}else if(l===Dr.BIN){const c=kt+s;this.body=e.slice(c,c+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qi{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=re.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const t=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},c={},u={};for(const d in a){const h=Zn[d]||d.toLowerCase();l[h]=a[d]}for(const d in e.attributes){const h=Zn[d]||d.toLowerCase();if(a[d]!==void 0){const f=t.accessors[e.attributes[d]],B=St[f.componentType];u[h]=B.name,c[h]=f.normalized===!0}}return n.getDependency("bufferView",s).then(function(d){return new Promise(function(h,f){r.decodeDracoFile(d,function(B){for(const C in B.attributes){const v=B.attributes[C],g=c[C];g!==void 0&&(v.normalized=g)}h(B)},l,u,nt,f)})})}}class $i{constructor(){this.name=re.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class eo{constructor(){this.name=re.KHR_MESH_QUANTIZATION}}class as extends Ca{constructor(e,n,t,r){super(e,n,t,r)}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)n[a]=t[s+a];return n}interpolate_(e,n,t,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=l*2,u=l*3,d=r-n,h=(t-n)/d,f=h*h,B=f*h,C=e*u,v=C-u,g=-2*B+3*f,I=B-f,y=1-g,S=I-f+h;for(let x=0;x!==l;x++){const b=a[v+x+l],E=a[v+x+c]*d,_=a[C+x+l],D=a[C+x]*d;s[x]=y*b+S*E+g*_+I*D}return s}}const to=new gt;class no extends as{interpolate_(e,n,t,r){const s=super.interpolate_(e,n,t,r);return to.fromArray(s).normalize().toArray(s),s}}const Ne={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},St={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Gr={9728:kn,9729:Se,9984:ha,9985:da,9986:fa,9987:Nr},xr={33071:tt,33648:ma,10497:Nn},Hn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Zn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...tr>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},it={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ro={CUBICSPLINE:void 0,LINEAR:jr,STEP:pa},Ln={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function so(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new kr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ba})),i.DefaultMaterial}function pt(i,e,n){for(const t in n.extensions)i[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=n.extensions[t])}function et(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ao(i,e,n){let t=!1,r=!1,s=!1;for(let u=0,d=e.length;u<d;u++){const h=e[u];if(h.POSITION!==void 0&&(t=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),t&&r&&s)break}if(!t&&!r&&!s)return Promise.resolve(i);const a=[],l=[],c=[];for(let u=0,d=e.length;u<d;u++){const h=e[u];if(t){const f=h.POSITION!==void 0?n.getDependency("accessor",h.POSITION):i.attributes.position;a.push(f)}if(r){const f=h.NORMAL!==void 0?n.getDependency("accessor",h.NORMAL):i.attributes.normal;l.push(f)}if(s){const f=h.COLOR_0!==void 0?n.getDependency("accessor",h.COLOR_0):i.attributes.color;c.push(f)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(c)]).then(function(u){const d=u[0],h=u[1],f=u[2];return t&&(i.morphAttributes.position=d),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=f),i.morphTargetsRelative=!0,i})}function io(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let n=0,t=e.weights.length;n<t;n++)i.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(i.morphTargetInfluences.length===n.length){i.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)i.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function oo(i){let e;const n=i.extensions&&i.extensions[re.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+On(n.attributes):e=i.indices+":"+On(i.attributes)+":"+i.mode,i.targets!==void 0)for(let t=0,r=i.targets.length;t<r;t++)e+=":"+On(i.targets[t]);return e}function On(i){let e="";const n=Object.keys(i).sort();for(let t=0,r=n.length;t<r;t++)e+=n[t]+":"+i[n[t]]+";";return e}function Yn(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function co(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const lo=new Ct;class uo{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new _i,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||r&&s<98?this.textureLoader=new qs(this.options.manager):this.textureLoader=new $s(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new lt(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const t=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(a){const l={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:t,userData:{}};return pt(s,l,r),et(l,r),Promise.all(t._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],t=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const a=n[r].joints;for(let l=0,c=a.length;l<c;l++)e[a[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(t[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,t){if(e.refs[n]<=1)return t;const r=t.clone(),s=(a,l)=>{const c=this.associations.get(a);c!=null&&this.associations.set(l,c);for(const[u,d]of a.children.entries())s(d,l.children[u])};return s(t,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let t=0;t<n.length;t++){const r=e(n[t]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const t=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&t.push(s)}return t}getDependency(e,n){const t=e+":"+n;let r=this.cache.get(t);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(t,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const t=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,a){return t.getDependency(e,a)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],t=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[re.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){t.load(Xt.resolveURL(n.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(t){const r=n.byteLength||0,s=n.byteOffset||0;return t.slice(s,s+r)})}loadAccessor(e){const n=this,t=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=Hn[r.type],l=St[r.componentType],c=r.normalized===!0,u=new l(r.count*a);return Promise.resolve(new Zt(u,a,c))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const l=a[0],c=Hn[r.type],u=St[r.componentType],d=u.BYTES_PER_ELEMENT,h=d*c,f=r.byteOffset||0,B=r.bufferView!==void 0?t.bufferViews[r.bufferView].byteStride:void 0,C=r.normalized===!0;let v,g;if(B&&B!==h){const I=Math.floor(f/B),y="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+I+":"+r.count;let S=n.cache.get(y);S||(v=new u(l,I*B,r.count*B/d),S=new ea(v,B/d),n.cache.add(y,S)),g=new ga(S,c,f%B/d,C)}else l===null?v=new u(r.count*c):v=new u(l,f,r.count*c),g=new Zt(v,c,C);if(r.sparse!==void 0){const I=Hn.SCALAR,y=St[r.sparse.indices.componentType],S=r.sparse.indices.byteOffset||0,x=r.sparse.values.byteOffset||0,b=new y(a[1],S,r.sparse.count*I),E=new u(a[2],x,r.sparse.count*c);l!==null&&(g=new Zt(g.array.slice(),g.itemSize,g.normalized));for(let _=0,D=b.length;_<D;_++){const G=b[_];if(g.setX(G,E[_*c]),c>=2&&g.setY(G,E[_*c+1]),c>=3&&g.setZ(G,E[_*c+2]),c>=4&&g.setW(G,E[_*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const n=this.json,t=this.options,s=n.textures[e].source,a=n.images[s];let l=this.textureLoader;if(a.uri){const c=t.manager.getHandler(a.uri);c!==null&&(l=c)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,n,t){const r=this,s=this.json,a=s.textures[e],l=s.images[n],c=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const u=this.loadImageSource(n,t).then(function(d){d.flipY=!1,d.name=a.name||l.name||"",d.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(d.name=l.uri);const f=(s.samplers||{})[a.sampler]||{};return d.magFilter=Gr[f.magFilter]||Se,d.minFilter=Gr[f.minFilter]||Nr,d.wrapS=xr[f.wrapS]||Nn,d.wrapT=xr[f.wrapT]||Nn,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=u,u}loadImageSource(e,n){const t=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],l=self.URL||self.webkitURL;let c=a.uri||"",u=!1;if(a.bufferView!==void 0)c=t.getDependency("bufferView",a.bufferView).then(function(h){u=!0;const f=new Blob([h],{type:a.mimeType});return c=l.createObjectURL(f),c});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(h){return new Promise(function(f,B){let C=f;n.isImageBitmapLoader===!0&&(C=function(v){const g=new ot(v);g.needsUpdate=!0,f(g)}),n.load(Xt.resolveURL(h,s.path),C,void 0,B)})}).then(function(h){return u===!0&&l.revokeObjectURL(c),et(h,a),h.userData.mimeType=a.mimeType||co(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),h});return this.sourceCache[e]=d,d}assignTexture(e,n,t,r){const s=this;return this.getDependency("texture",t.index).then(function(a){if(!a)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(a=a.clone(),a.channel=t.texCoord),s.extensions[re.KHR_TEXTURE_TRANSFORM]){const l=t.extensions!==void 0?t.extensions[re.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=s.associations.get(a);a=s.extensions[re.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),s.associations.set(a,c)}}return r!==void 0&&(typeof r=="number"&&(r=r===br?Bt:nt),"colorSpace"in a?a.colorSpace=r:a.encoding=r===Bt?br:xi),e[n]=a,a})}assignFinalMaterial(e){const n=e.geometry;let t=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,a=n.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+t.uuid;let c=this.cache.get(l);c||(c=new ta,xn.prototype.copy.call(c,t),c.color.copy(t.color),c.map=t.map,c.sizeAttenuation=!1,this.cache.add(l,c)),t=c}else if(e.isLine){const l="LineBasicMaterial:"+t.uuid;let c=this.cache.get(l);c||(c=new na,xn.prototype.copy.call(c,t),c.color.copy(t.color),c.map=t.map,this.cache.add(l,c)),t=c}if(r||s||a){let l="ClonedMaterial:"+t.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=t.clone(),s&&(c.vertexColors=!0),a&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(t))),t=c}e.material=t}getMaterialType(){return kr}loadMaterial(e){const n=this,t=this.json,r=this.extensions,s=t.materials[e];let a;const l={},c=s.extensions||{},u=[];if(c[re.KHR_MATERIALS_UNLIT]){const h=r[re.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),u.push(h.extendParams(l,s,n))}else{const h=s.pbrMetallicRoughness||{};if(l.color=new Ve(1,1,1),l.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;l.color.setRGB(f[0],f[1],f[2],nt),l.opacity=f[3]}h.baseColorTexture!==void 0&&u.push(n.assignTexture(l,"map",h.baseColorTexture,Bt)),l.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,l.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(l,"metalnessMap",h.metallicRoughnessTexture)),u.push(n.assignTexture(l,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Jr);const d=s.alphaMode||Ln.OPAQUE;if(d===Ln.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===Ln.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==xt&&(u.push(n.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Oe(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;l.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&a!==xt&&(u.push(n.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==xt){const h=s.emissiveFactor;l.emissive=new Ve().setRGB(h[0],h[1],h[2],nt)}return s.emissiveTexture!==void 0&&a!==xt&&u.push(n.assignTexture(l,"emissiveMap",s.emissiveTexture,Bt)),Promise.all(u).then(function(){const h=new a(l);return s.name&&(h.name=s.name),et(h,s),n.associations.set(h,{materials:e}),s.extensions&&pt(r,h,s),h})}createUniqueName(e){const n=ra.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,t=this.extensions,r=this.primitiveCache;function s(l){return t[re.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,n).then(function(c){return _r(c,l,n)})}const a=[];for(let l=0,c=e.length;l<c;l++){const u=e[l],d=oo(u),h=r[d];if(h)a.push(h.promise);else{let f;u.extensions&&u.extensions[re.KHR_DRACO_MESH_COMPRESSION]?f=s(u):f=_r(new Kr,u,n),r[d]={primitive:u,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const n=this,t=this.json,r=this.extensions,s=t.meshes[e],a=s.primitives,l=[];for(let c=0,u=a.length;c<u;c++){const d=a[c].material===void 0?so(this.cache):this.getDependency("material",a[c].material);l.push(d)}return l.push(n.loadGeometries(a)),Promise.all(l).then(function(c){const u=c.slice(0,c.length-1),d=c[c.length-1],h=[];for(let B=0,C=d.length;B<C;B++){const v=d[B],g=a[B];let I;const y=u[B];if(g.mode===Ne.TRIANGLES||g.mode===Ne.TRIANGLE_STRIP||g.mode===Ne.TRIANGLE_FAN||g.mode===void 0)I=s.isSkinnedMesh===!0?new sa(v,y):new qt(v,y),I.isSkinnedMesh===!0&&I.normalizeSkinWeights(),g.mode===Ne.TRIANGLE_STRIP?I.geometry=Fr(I.geometry,Pr):g.mode===Ne.TRIANGLE_FAN&&(I.geometry=Fr(I.geometry,Jn));else if(g.mode===Ne.LINES)I=new aa(v,y);else if(g.mode===Ne.LINE_STRIP)I=new ia(v,y);else if(g.mode===Ne.LINE_LOOP)I=new oa(v,y);else if(g.mode===Ne.POINTS)I=new ca(v,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(I.geometry.morphAttributes).length>0&&io(I,s),I.name=n.createUniqueName(s.name||"mesh_"+e),et(I,s),g.extensions&&pt(r,I,g),n.assignFinalMaterial(I),h.push(I)}for(let B=0,C=h.length;B<C;B++)n.associations.set(h[B],{meshes:e,primitives:B});if(h.length===1)return s.extensions&&pt(r,h[0],s),h[0];const f=new _n;s.extensions&&pt(r,f,s),n.associations.set(f,{meshes:e});for(let B=0,C=h.length;B<C;B++)f.add(h[B]);return f})}loadCamera(e){let n;const t=this.json.cameras[e],r=t[t.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?n=new Bn(Yt.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):t.type==="orthographic"&&(n=new Qt(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),t.name&&(n.name=this.createUniqueName(t.name)),et(n,t),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],t=[];for(let r=0,s=n.joints.length;r<s;r++)t.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",n.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(r){const s=r.pop(),a=r,l=[],c=[];for(let u=0,d=a.length;u<d;u++){const h=a[u];if(h){l.push(h);const f=new Ct;s!==null&&f.fromArray(s.array,u*16),c.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new la(l,c)})}loadAnimation(e){const n=this.json,t=this,r=n.animations[e],s=r.name?r.name:"animation_"+e,a=[],l=[],c=[],u=[],d=[];for(let h=0,f=r.channels.length;h<f;h++){const B=r.channels[h],C=r.samplers[B.sampler],v=B.target,g=v.node,I=r.parameters!==void 0?r.parameters[C.input]:C.input,y=r.parameters!==void 0?r.parameters[C.output]:C.output;v.node!==void 0&&(a.push(this.getDependency("node",g)),l.push(this.getDependency("accessor",I)),c.push(this.getDependency("accessor",y)),u.push(C),d.push(v))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u),Promise.all(d)]).then(function(h){const f=h[0],B=h[1],C=h[2],v=h[3],g=h[4],I=[];for(let y=0,S=f.length;y<S;y++){const x=f[y],b=B[y],E=C[y],_=v[y],D=g[y];if(x===void 0)continue;x.updateMatrix&&x.updateMatrix();const G=t._createAnimationTracks(x,b,E,_,D);if(G)for(let O=0;O<G.length;O++)I.push(G[O])}return new ua(s,void 0,I)})}createNodeMesh(e){const n=this.json,t=this,r=n.nodes[e];return r.mesh===void 0?null:t.getDependency("mesh",r.mesh).then(function(s){const a=t._getNodeRef(t.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let c=0,u=r.weights.length;c<u;c++)l.morphTargetInfluences[c]=r.weights[c]}),a})}loadNode(e){const n=this.json,t=this,r=n.nodes[e],s=t._loadNodeShallow(e),a=[],l=r.children||[];for(let u=0,d=l.length;u<d;u++)a.push(t.getDependency("node",l[u]));const c=r.skin===void 0?Promise.resolve(null):t.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),c]).then(function(u){const d=u[0],h=u[1],f=u[2];f!==null&&d.traverse(function(B){B.isSkinnedMesh&&B.bind(f,lo)});for(let B=0,C=h.length;B<C;B++)d.add(h[B]);return d})}_loadNodeShallow(e){const n=this.json,t=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],a=s.name?r.createUniqueName(s.name):"",l=[],c=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return c&&l.push(c),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){l.push(u)}),this.nodeCache[e]=Promise.all(l).then(function(u){let d;if(s.isBone===!0?d=new Aa:u.length>1?d=new _n:u.length===1?d=u[0]:d=new Cn,d!==u[0])for(let h=0,f=u.length;h<f;h++)d.add(u[h]);if(s.name&&(d.userData.name=s.name,d.name=a),et(d,s),s.extensions&&pt(t,d,s),s.matrix!==void 0){const h=new Ct;h.fromArray(s.matrix),d.applyMatrix4(h)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const n=this.extensions,t=this.json.scenes[e],r=this,s=new _n;t.name&&(s.name=r.createUniqueName(t.name)),et(s,t),t.extensions&&pt(n,s,t);const a=t.nodes||[],l=[];for(let c=0,u=a.length;c<u;c++)l.push(r.getDependency("node",a[c]));return Promise.all(l).then(function(c){for(let d=0,h=c.length;d<h;d++)s.add(c[d]);const u=d=>{const h=new Map;for(const[f,B]of r.associations)(f instanceof xn||f instanceof ot)&&h.set(f,B);return d.traverse(f=>{const B=r.associations.get(f);B!=null&&h.set(f,B)}),h};return r.associations=u(s),s})}_createAnimationTracks(e,n,t,r,s){const a=[],l=e.name?e.name:e.uuid,c=[];it[s.path]===it.weights?e.traverse(function(f){f.morphTargetInfluences&&c.push(f.name?f.name:f.uuid)}):c.push(l);let u;switch(it[s.path]){case it.weights:u=gr;break;case it.rotation:u=Cr;break;case it.position:case it.scale:u=Br;break;default:switch(t.itemSize){case 1:u=gr;break;case 2:case 3:default:u=Br;break}break}const d=r.interpolation!==void 0?ro[r.interpolation]:jr,h=this._getArrayFromAccessor(t);for(let f=0,B=c.length;f<B;f++){const C=new u(c[f]+"."+it[s.path],n.array,h,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(C),a.push(C)}return a}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const t=Yn(n.constructor),r=new Float32Array(n.length);for(let s=0,a=n.length;s<a;s++)r[s]=n[s]*t;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){const r=this instanceof Cr?no:as;return new r(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Ao(i,e,n){const t=e.attributes,r=new zn;if(t.POSITION!==void 0){const l=n.json.accessors[t.POSITION],c=l.min,u=l.max;if(c!==void 0&&u!==void 0){if(r.set(new ee(c[0],c[1],c[2]),new ee(u[0],u[1],u[2])),l.normalized){const d=Yn(St[l.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new ee,c=new ee;for(let u=0,d=s.length;u<d;u++){const h=s[u];if(h.POSITION!==void 0){const f=n.json.accessors[h.POSITION],B=f.min,C=f.max;if(B!==void 0&&C!==void 0){if(c.setX(Math.max(Math.abs(B[0]),Math.abs(C[0]))),c.setY(Math.max(Math.abs(B[1]),Math.abs(C[1]))),c.setZ(Math.max(Math.abs(B[2]),Math.abs(C[2]))),f.normalized){const v=Yn(St[f.componentType]);c.multiplyScalar(v)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const a=new Qr;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=a}function _r(i,e,n){const t=e.attributes,r=[];function s(a,l){return n.getDependency("accessor",a).then(function(c){i.setAttribute(l,c)})}for(const a in t){const l=Zn[a]||a.toLowerCase();l in i.attributes||r.push(s(t[a],l))}if(e.indices!==void 0&&!i.index){const a=n.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(a)}return et(i,e),Ao(i,e,n),Promise.all(r).then(function(){return e.targets!==void 0?ao(i,e.targets,n):i})}const ho={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},fo={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class mo extends Xr{constructor(e){super(e),this.type=we}parse(e){const a=function(D,G){switch(D){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(G||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(G||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(G||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(G||""))}},d=`
`,h=function(D,G,O){G=G||1024;let z=D.pos,V=-1,j=0,ne="",q=String.fromCharCode.apply(null,new Uint16Array(D.subarray(z,z+128)));for(;0>(V=q.indexOf(d))&&j<G&&z<D.byteLength;)ne+=q,j+=q.length,z+=128,q+=String.fromCharCode.apply(null,new Uint16Array(D.subarray(z,z+128)));return-1<V?(D.pos+=j+V+1,ne+q.slice(0,V)):!1},f=function(D){const G=/^#\?(\S+)/,O=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Z=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,j={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ne,q;for((D.pos>=D.byteLength||!(ne=h(D)))&&a(1,"no header found"),(q=ne.match(G))||a(3,"bad initial token"),j.valid|=1,j.programtype=q[1],j.string+=ne+`
`;ne=h(D),ne!==!1;){if(j.string+=ne+`
`,ne.charAt(0)==="#"){j.comments+=ne+`
`;continue}if((q=ne.match(O))&&(j.gamma=parseFloat(q[1])),(q=ne.match(Z))&&(j.exposure=parseFloat(q[1])),(q=ne.match(z))&&(j.valid|=2,j.format=q[1]),(q=ne.match(V))&&(j.valid|=4,j.height=parseInt(q[1],10),j.width=parseInt(q[2],10)),j.valid&2&&j.valid&4)break}return j.valid&2||a(3,"missing format specifier"),j.valid&4||a(3,"missing image size specifier"),j},B=function(D,G,O){const Z=G;if(Z<8||Z>32767||D[0]!==2||D[1]!==2||D[2]&128)return new Uint8Array(D);Z!==(D[2]<<8|D[3])&&a(3,"wrong scanline width");const z=new Uint8Array(4*G*O);z.length||a(4,"unable to allocate buffer space");let V=0,j=0;const ne=4*Z,q=new Uint8Array(4),Ae=new Uint8Array(ne);let ce=O;for(;ce>0&&j<D.byteLength;){j+4>D.byteLength&&a(1),q[0]=D[j++],q[1]=D[j++],q[2]=D[j++],q[3]=D[j++],(q[0]!=2||q[1]!=2||(q[2]<<8|q[3])!=Z)&&a(3,"bad rgbe scanline format");let Ie=0,se;for(;Ie<ne&&j<D.byteLength;){se=D[j++];const le=se>128;if(le&&(se-=128),(se===0||Ie+se>ne)&&a(3,"bad scanline data"),le){const Ce=D[j++];for(let be=0;be<se;be++)Ae[Ie++]=Ce}else Ae.set(D.subarray(j,j+se),Ie),Ie+=se,j+=se}const Me=Z;for(let le=0;le<Me;le++){let Ce=0;z[V]=Ae[le+Ce],Ce+=Z,z[V+1]=Ae[le+Ce],Ce+=Z,z[V+2]=Ae[le+Ce],Ce+=Z,z[V+3]=Ae[le+Ce],V+=4}ce--}return z},C=function(D,G,O,Z){const z=D[G+3],V=Math.pow(2,z-128)/255;O[Z+0]=D[G+0]*V,O[Z+1]=D[G+1]*V,O[Z+2]=D[G+2]*V,O[Z+3]=1},v=function(D,G,O,Z){const z=D[G+3],V=Math.pow(2,z-128)/255;O[Z+0]=_t.toHalfFloat(Math.min(D[G+0]*V,65504)),O[Z+1]=_t.toHalfFloat(Math.min(D[G+1]*V,65504)),O[Z+2]=_t.toHalfFloat(Math.min(D[G+2]*V,65504)),O[Z+3]=_t.toHalfFloat(1)},g=new Uint8Array(e);g.pos=0;const I=f(g),y=I.width,S=I.height,x=B(g.subarray(g.pos),y,S);let b,E,_;switch(this.type){case We:_=x.length/4;const D=new Float32Array(_*4);for(let O=0;O<_;O++)C(x,O*4,D,O*4);b=D,E=We;break;case we:_=x.length/4;const G=new Uint16Array(_*4);for(let O=0;O<_;O++)v(x,O*4,G,O*4);b=G,E=we;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:y,height:S,data:b,header:I.string,gamma:I.gamma,exposure:I.exposure,type:E}}setDataType(e){return this.type=e,this}load(e,n,t,r){function s(a,l){switch(a.type){case We:case we:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=Se,a.magFilter=Se,a.generateMipmaps=!1,a.flipY=!0;break}n&&n(a,l)}return super.load(e,s,t,r)}}const Kt=tr>=152;class po extends Xr{constructor(e){super(e),this.type=we}parse(e){const G=Math.pow(2.7182818,2.2);function O(o,A){for(var m=0,M=0;M<65536;++M)(M==0||o[M>>3]&1<<(M&7))&&(A[m++]=M);for(var R=m-1;m<65536;)A[m++]=0;return R}function Z(o){for(var A=0;A<16384;A++)o[A]={},o[A].len=0,o[A].lit=0,o[A].p=null}const z={l:0,c:0,lc:0};function V(o,A,m,M,R){for(;m<o;)A=A<<8|Rt(M,R),m+=8;m-=o,z.l=A>>m&(1<<o)-1,z.c=A,z.lc=m}const j=new Array(59);function ne(o){for(var A=0;A<=58;++A)j[A]=0;for(var A=0;A<65537;++A)j[o[A]]+=1;for(var m=0,A=58;A>0;--A){var M=m+j[A]>>1;j[A]=m,m=M}for(var A=0;A<65537;++A){var R=o[A];R>0&&(o[A]=R|j[R]++<<6)}}function q(o,A,m,M,R,T,U){for(var w=m,k=0,N=0;R<=T;R++){if(w.value-m.value>M)return!1;V(6,k,N,o,w);var K=z.l;if(k=z.c,N=z.lc,U[R]=K,K==63){if(w.value-m.value>M)throw"Something wrong with hufUnpackEncTable";V(8,k,N,o,w);var J=z.l+6;if(k=z.c,N=z.lc,R+J>T+1)throw"Something wrong with hufUnpackEncTable";for(;J--;)U[R++]=0;R--}else if(K>=59){var J=K-59+2;if(R+J>T+1)throw"Something wrong with hufUnpackEncTable";for(;J--;)U[R++]=0;R--}}ne(U)}function Ae(o){return o&63}function ce(o){return o>>6}function Ie(o,A,m,M){for(;A<=m;A++){var R=ce(o[A]),T=Ae(o[A]);if(R>>T)throw"Invalid table entry";if(T>14){var U=M[R>>T-14];if(U.len)throw"Invalid table entry";if(U.lit++,U.p){var w=U.p;U.p=new Array(U.lit);for(var k=0;k<U.lit-1;++k)U.p[k]=w[k]}else U.p=new Array(1);U.p[U.lit-1]=A}else if(T)for(var N=0,k=1<<14-T;k>0;k--){var U=M[(R<<14-T)+N];if(U.len||U.p)throw"Invalid table entry";U.len=T,U.lit=A,N++}}return!0}const se={c:0,lc:0};function Me(o,A,m,M){o=o<<8|Rt(m,M),A+=8,se.c=o,se.lc=A}const le={c:0,lc:0};function Ce(o,A,m,M,R,T,U,w,k,N){if(o==A){M<8&&(Me(m,M,R,U),m=se.c,M=se.lc),M-=8;var K=m>>M,K=new Uint8Array([K])[0];if(k.value+K>N)return!1;for(var J=w[k.value-1];K-- >0;)w[k.value++]=J}else if(k.value<N)w[k.value++]=o;else return!1;le.c=m,le.lc=M}function be(o){return o&65535}function He(o){var A=be(o);return A>32767?A-65536:A}const ae={a:0,b:0};function De(o,A){var m=He(o),M=He(A),R=M,T=m+(R&1)+(R>>1),U=T,w=T-R;ae.a=U,ae.b=w}function Re(o,A){var m=be(o),M=be(A),R=m-(M>>1)&65535,T=M+R-32768&65535;ae.a=T,ae.b=R}function qe(o,A,m,M,R,T,U){for(var w=U<16384,k=m>R?R:m,N=1,K;N<=k;)N<<=1;for(N>>=1,K=N,N>>=1;N>=1;){for(var J=0,Ee=J+T*(R-K),X=T*N,Y=T*K,$=M*N,te=M*K,he,fe,ye,_e;J<=Ee;J+=Y){for(var me=J,Ze=J+M*(m-K);me<=Ze;me+=te){var Be=me+$,Fe=me+X,$e=Fe+$;w?(De(o[me+A],o[Fe+A]),he=ae.a,ye=ae.b,De(o[Be+A],o[$e+A]),fe=ae.a,_e=ae.b,De(he,fe),o[me+A]=ae.a,o[Be+A]=ae.b,De(ye,_e),o[Fe+A]=ae.a,o[$e+A]=ae.b):(Re(o[me+A],o[Fe+A]),he=ae.a,ye=ae.b,Re(o[Be+A],o[$e+A]),fe=ae.a,_e=ae.b,Re(he,fe),o[me+A]=ae.a,o[Be+A]=ae.b,Re(ye,_e),o[Fe+A]=ae.a,o[$e+A]=ae.b)}if(m&N){var Fe=me+X;w?De(o[me+A],o[Fe+A]):Re(o[me+A],o[Fe+A]),he=ae.a,o[Fe+A]=ae.b,o[me+A]=he}}if(R&N)for(var me=J,Ze=J+M*(m-K);me<=Ze;me+=te){var Be=me+$;w?De(o[me+A],o[Be+A]):Re(o[me+A],o[Be+A]),he=ae.a,o[Be+A]=ae.b,o[me+A]=he}K=N,N>>=1}return J}function In(o,A,m,M,R,T,U,w,k,N){for(var K=0,J=0,Ee=w,X=Math.trunc(R.value+(T+7)/8);R.value<X;)for(Me(K,J,m,R),K=se.c,J=se.lc;J>=14;){var Y=K>>J-14&16383,$=A[Y];if($.len)J-=$.len,Ce($.lit,U,K,J,m,M,R,k,N,Ee),K=le.c,J=le.lc;else{if(!$.p)throw"hufDecode issues";var te;for(te=0;te<$.lit;te++){for(var he=Ae(o[$.p[te]]);J<he&&R.value<X;)Me(K,J,m,R),K=se.c,J=se.lc;if(J>=he&&ce(o[$.p[te]])==(K>>J-he&(1<<he)-1)){J-=he,Ce($.p[te],U,K,J,m,M,R,k,N,Ee),K=le.c,J=le.lc;break}}if(te==$.lit)throw"hufDecode issues"}}var fe=8-T&7;for(K>>=fe,J-=fe;J>0;){var $=A[K<<14-J&16383];if($.len)J-=$.len,Ce($.lit,U,K,J,m,M,R,k,N,Ee),K=le.c,J=le.lc;else throw"hufDecode issues"}return!0}function en(o,A,m,M,R,T){var U={value:0},w=m.value,k=Te(A,m),N=Te(A,m);m.value+=4;var K=Te(A,m);if(m.value+=4,k<0||k>=65537||N<0||N>=65537)throw"Something wrong with HUF_ENCSIZE";var J=new Array(65537),Ee=new Array(16384);Z(Ee);var X=M-(m.value-w);if(q(o,A,m,X,k,N,J),K>8*(M-(m.value-w)))throw"Something wrong with hufUncompress";Ie(J,k,N,Ee),In(J,Ee,o,A,m,K,N,T,R,U)}function tn(o,A,m){for(var M=0;M<m;++M)A[M]=o[A[M]]}function Lt(o){for(var A=1;A<o.length;A++){var m=o[A-1]+o[A]-128;o[A]=m}}function Ot(o,A){for(var m=0,M=Math.floor((o.length+1)/2),R=0,T=o.length-1;!(R>T||(A[R++]=o[m++],R>T));)A[R++]=o[M++]}function nn(o){for(var A=o.byteLength,m=new Array,M=0,R=new DataView(o);A>0;){var T=R.getInt8(M++);if(T<0){var U=-T;A-=U+1;for(var w=0;w<U;w++)m.push(R.getUint8(M++))}else{var U=T;A-=2;for(var k=R.getUint8(M++),w=0;w<U+1;w++)m.push(k)}}return m}function yn(o,A,m,M,R,T){var Be=new DataView(T.buffer),U=m[o.idx[0]].width,w=m[o.idx[0]].height,k=3,N=Math.floor(U/8),K=Math.ceil(U/8),J=Math.ceil(w/8),Ee=U-(K-1)*8,X=w-(J-1)*8,Y={value:0},$=new Array(k),te=new Array(k),he=new Array(k),fe=new Array(k),ye=new Array(k);for(let de=0;de<k;++de)ye[de]=A[o.idx[de]],$[de]=de<1?0:$[de-1]+K*J,te[de]=new Float32Array(64),he[de]=new Uint16Array(64),fe[de]=new Uint16Array(K*64);for(let de=0;de<J;++de){var _e=8;de==J-1&&(_e=X);var me=8;for(let ve=0;ve<K;++ve){ve==K-1&&(me=Ee);for(let ue=0;ue<k;++ue)he[ue].fill(0),he[ue][0]=R[$[ue]++],rn(Y,M,he[ue]),sn(he[ue],te[ue]),an(te[ue]);Fn(te);for(let ue=0;ue<k;++ue)Rn(te[ue],fe[ue],ve*64)}let Ge=0;for(let ve=0;ve<k;++ve){const ue=m[o.idx[ve]].type;for(let Pe=8*de;Pe<8*de+_e;++Pe){Ge=ye[ve][Pe];for(let mt=0;mt<N;++mt){const Le=mt*64+(Pe&7)*8;Be.setUint16(Ge+0*2*ue,fe[ve][Le+0],!0),Be.setUint16(Ge+1*2*ue,fe[ve][Le+1],!0),Be.setUint16(Ge+2*2*ue,fe[ve][Le+2],!0),Be.setUint16(Ge+3*2*ue,fe[ve][Le+3],!0),Be.setUint16(Ge+4*2*ue,fe[ve][Le+4],!0),Be.setUint16(Ge+5*2*ue,fe[ve][Le+5],!0),Be.setUint16(Ge+6*2*ue,fe[ve][Le+6],!0),Be.setUint16(Ge+7*2*ue,fe[ve][Le+7],!0),Ge+=8*2*ue}}if(N!=K)for(let Pe=8*de;Pe<8*de+_e;++Pe){const mt=ye[ve][Pe]+8*N*2*ue,Le=N*64+(Pe&7)*8;for(let st=0;st<me;++st)Be.setUint16(mt+st*2*ue,fe[ve][Le+st],!0)}}}for(var Ze=new Uint16Array(U),Be=new DataView(T.buffer),Fe=0;Fe<k;++Fe){m[o.idx[Fe]].decoded=!0;var $e=m[o.idx[Fe]].type;if(m[Fe].type==2)for(var Nt=0;Nt<w;++Nt){const de=ye[Fe][Nt];for(var Ue=0;Ue<U;++Ue)Ze[Ue]=Be.getUint16(de+Ue*2*$e,!0);for(var Ue=0;Ue<U;++Ue)Be.setFloat32(de+Ue*2*$e,P(Ze[Ue]),!0)}}}function rn(o,A,m){for(var M,R=1;R<64;)M=A[o.value],M==65280?R=64:M>>8==255?R+=M&255:(m[R]=M,R++),o.value++}function sn(o,A){A[0]=P(o[0]),A[1]=P(o[1]),A[2]=P(o[5]),A[3]=P(o[6]),A[4]=P(o[14]),A[5]=P(o[15]),A[6]=P(o[27]),A[7]=P(o[28]),A[8]=P(o[2]),A[9]=P(o[4]),A[10]=P(o[7]),A[11]=P(o[13]),A[12]=P(o[16]),A[13]=P(o[26]),A[14]=P(o[29]),A[15]=P(o[42]),A[16]=P(o[3]),A[17]=P(o[8]),A[18]=P(o[12]),A[19]=P(o[17]),A[20]=P(o[25]),A[21]=P(o[30]),A[22]=P(o[41]),A[23]=P(o[43]),A[24]=P(o[9]),A[25]=P(o[11]),A[26]=P(o[18]),A[27]=P(o[24]),A[28]=P(o[31]),A[29]=P(o[40]),A[30]=P(o[44]),A[31]=P(o[53]),A[32]=P(o[10]),A[33]=P(o[19]),A[34]=P(o[23]),A[35]=P(o[32]),A[36]=P(o[39]),A[37]=P(o[45]),A[38]=P(o[52]),A[39]=P(o[54]),A[40]=P(o[20]),A[41]=P(o[22]),A[42]=P(o[33]),A[43]=P(o[38]),A[44]=P(o[46]),A[45]=P(o[51]),A[46]=P(o[55]),A[47]=P(o[60]),A[48]=P(o[21]),A[49]=P(o[34]),A[50]=P(o[37]),A[51]=P(o[47]),A[52]=P(o[50]),A[53]=P(o[56]),A[54]=P(o[59]),A[55]=P(o[61]),A[56]=P(o[35]),A[57]=P(o[36]),A[58]=P(o[48]),A[59]=P(o[49]),A[60]=P(o[57]),A[61]=P(o[58]),A[62]=P(o[62]),A[63]=P(o[63])}function an(o){const A=.5*Math.cos(.7853975),m=.5*Math.cos(3.14159/16),M=.5*Math.cos(3.14159/8),R=.5*Math.cos(3*3.14159/16),T=.5*Math.cos(5*3.14159/16),U=.5*Math.cos(3*3.14159/8),w=.5*Math.cos(7*3.14159/16);for(var k=new Array(4),N=new Array(4),K=new Array(4),J=new Array(4),Ee=0;Ee<8;++Ee){var X=Ee*8;k[0]=M*o[X+2],k[1]=U*o[X+2],k[2]=M*o[X+6],k[3]=U*o[X+6],N[0]=m*o[X+1]+R*o[X+3]+T*o[X+5]+w*o[X+7],N[1]=R*o[X+1]-w*o[X+3]-m*o[X+5]-T*o[X+7],N[2]=T*o[X+1]-m*o[X+3]+w*o[X+5]+R*o[X+7],N[3]=w*o[X+1]-T*o[X+3]+R*o[X+5]-m*o[X+7],K[0]=A*(o[X+0]+o[X+4]),K[3]=A*(o[X+0]-o[X+4]),K[1]=k[0]+k[3],K[2]=k[1]-k[2],J[0]=K[0]+K[1],J[1]=K[3]+K[2],J[2]=K[3]-K[2],J[3]=K[0]-K[1],o[X+0]=J[0]+N[0],o[X+1]=J[1]+N[1],o[X+2]=J[2]+N[2],o[X+3]=J[3]+N[3],o[X+4]=J[3]-N[3],o[X+5]=J[2]-N[2],o[X+6]=J[1]-N[1],o[X+7]=J[0]-N[0]}for(var Y=0;Y<8;++Y)k[0]=M*o[16+Y],k[1]=U*o[16+Y],k[2]=M*o[48+Y],k[3]=U*o[48+Y],N[0]=m*o[8+Y]+R*o[24+Y]+T*o[40+Y]+w*o[56+Y],N[1]=R*o[8+Y]-w*o[24+Y]-m*o[40+Y]-T*o[56+Y],N[2]=T*o[8+Y]-m*o[24+Y]+w*o[40+Y]+R*o[56+Y],N[3]=w*o[8+Y]-T*o[24+Y]+R*o[40+Y]-m*o[56+Y],K[0]=A*(o[Y]+o[32+Y]),K[3]=A*(o[Y]-o[32+Y]),K[1]=k[0]+k[3],K[2]=k[1]-k[2],J[0]=K[0]+K[1],J[1]=K[3]+K[2],J[2]=K[3]-K[2],J[3]=K[0]-K[1],o[0+Y]=J[0]+N[0],o[8+Y]=J[1]+N[1],o[16+Y]=J[2]+N[2],o[24+Y]=J[3]+N[3],o[32+Y]=J[3]-N[3],o[40+Y]=J[2]-N[2],o[48+Y]=J[1]-N[1],o[56+Y]=J[0]-N[0]}function Fn(o){for(var A=0;A<64;++A){var m=o[0][A],M=o[1][A],R=o[2][A];o[0][A]=m+1.5747*R,o[1][A]=m-.1873*M-.4682*R,o[2][A]=m+1.8556*M}}function Rn(o,A,m){for(var M=0;M<64;++M)A[m+M]=_t.toHalfFloat(on(o[M]))}function on(o){return o<=1?Math.sign(o)*Math.pow(Math.abs(o),2.2):Math.sign(o)*Math.pow(G,Math.abs(o)-1)}function It(o){return new DataView(o.array.buffer,o.offset.value,o.size)}function ut(o){var A=o.viewer.buffer.slice(o.offset.value,o.offset.value+o.size),m=new Uint8Array(nn(A)),M=new Uint8Array(m.length);return Lt(m),Ot(m,M),new DataView(M.buffer)}function Ut(o){var A=o.array.slice(o.offset.value,o.offset.value+o.size),m=hn(A),M=new Uint8Array(m.length);return Lt(m),Ot(m,M),new DataView(M.buffer)}function Tn(o){for(var A=o.viewer,m={value:o.offset.value},M=new Uint16Array(o.width*o.scanlineBlockSize*(o.channels*o.type)),R=new Uint8Array(8192),T=0,U=new Array(o.channels),w=0;w<o.channels;w++)U[w]={},U[w].start=T,U[w].end=U[w].start,U[w].nx=o.width,U[w].ny=o.lines,U[w].size=o.type,T+=U[w].nx*U[w].ny*U[w].size;var k=xe(A,m),N=xe(A,m);if(N>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(k<=N)for(var w=0;w<N-k+1;w++)R[w+k]=p(A,m);var K=new Uint16Array(65536),J=O(R,K),Ee=Te(A,m);en(o.array,A,m,Ee,M,T);for(var w=0;w<o.channels;++w)for(var X=U[w],Y=0;Y<U[w].size;++Y)qe(M,X.start+Y,X.nx,X.size,X.ny,X.nx*X.size,J);tn(K,M,T);for(var $=0,te=new Uint8Array(M.buffer.byteLength),he=0;he<o.lines;he++)for(var fe=0;fe<o.channels;fe++){var X=U[fe],ye=X.nx*X.size,_e=new Uint8Array(M.buffer,X.end*2,ye*2);te.set(_e,$),$+=ye*2,X.end+=ye}return new DataView(te.buffer)}function cn(o){var A=o.array.slice(o.offset.value,o.offset.value+o.size),m=hn(A);const M=o.lines*o.channels*o.width,R=o.type==1?new Uint16Array(M):new Uint32Array(M);let T=0,U=0;const w=new Array(4);for(let k=0;k<o.lines;k++)for(let N=0;N<o.channels;N++){let K=0;switch(o.type){case 1:w[0]=T,w[1]=w[0]+o.width,T=w[1]+o.width;for(let J=0;J<o.width;++J){const Ee=m[w[0]++]<<8|m[w[1]++];K+=Ee,R[U]=K,U++}break;case 2:w[0]=T,w[1]=w[0]+o.width,w[2]=w[1]+o.width,T=w[2]+o.width;for(let J=0;J<o.width;++J){const Ee=m[w[0]++]<<24|m[w[1]++]<<16|m[w[2]++]<<8;K+=Ee,R[U]=K,U++}break}}return new DataView(R.buffer)}function yt(o){var A=o.viewer,m={value:o.offset.value},M=new Uint8Array(o.width*o.lines*(o.channels*o.type*2)),R={version:L(A,m),unknownUncompressedSize:L(A,m),unknownCompressedSize:L(A,m),acCompressedSize:L(A,m),dcCompressedSize:L(A,m),rleCompressedSize:L(A,m),rleUncompressedSize:L(A,m),rleRawSize:L(A,m),totalAcUncompressedCount:L(A,m),totalDcUncompressedCount:L(A,m),acCompression:L(A,m)};if(R.version<2)throw"EXRLoader.parse: "+Jt.compression+" version "+R.version+" is unsupported";for(var T=new Array,U=xe(A,m)-2;U>0;){var w=Ft(A.buffer,m),k=p(A,m),N=k>>2&3,K=(k>>4)-1,J=new Int8Array([K])[0],Ee=p(A,m);T.push({name:w,index:J,type:Ee,compression:N}),U-=w.length+3}for(var X=Jt.channels,Y=new Array(o.channels),$=0;$<o.channels;++$){var te=Y[$]={},he=X[$];te.name=he.name,te.compression=0,te.decoded=!1,te.type=he.pixelType,te.pLinear=he.pLinear,te.width=o.width,te.height=o.lines}for(var fe={idx:new Array(3)},ye=0;ye<o.channels;++ye)for(var te=Y[ye],$=0;$<T.length;++$){var _e=T[$];te.name==_e.name&&(te.compression=_e.compression,_e.index>=0&&(fe.idx[_e.index]=ye),te.offset=ye)}if(R.acCompressedSize>0)switch(R.acCompression){case 0:var Be=new Uint16Array(R.totalAcUncompressedCount);en(o.array,A,m,R.acCompressedSize,Be,R.totalAcUncompressedCount);break;case 1:var me=o.array.slice(m.value,m.value+R.totalAcUncompressedCount),Ze=hn(me),Be=new Uint16Array(Ze.buffer);m.value+=R.totalAcUncompressedCount;break}if(R.dcCompressedSize>0){var Fe={array:o.array,offset:m,size:R.dcCompressedSize},$e=new Uint16Array(Ut(Fe).buffer);m.value+=R.dcCompressedSize}if(R.rleRawSize>0){var me=o.array.slice(m.value,m.value+R.rleCompressedSize),Ze=hn(me),Nt=nn(Ze.buffer);m.value+=R.rleCompressedSize}for(var Ue=0,de=new Array(Y.length),$=0;$<de.length;++$)de[$]=new Array;for(var Ge=0;Ge<o.lines;++Ge)for(var ve=0;ve<Y.length;++ve)de[ve].push(Ue),Ue+=Y[ve].width*o.type*2;yn(fe,de,Y,Be,$e,M);for(var $=0;$<Y.length;++$){var te=Y[$];if(!te.decoded)switch(te.compression){case 2:for(var ue=0,Pe=0,Ge=0;Ge<o.lines;++Ge){for(var mt=de[$][ue],Le=0;Le<te.width;++Le){for(var st=0;st<2*te.type;++st)M[mt++]=Nt[Pe+st*te.width*te.height];Pe++}ue++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(M.buffer)}function Ft(o,A){for(var m=new Uint8Array(o),M=0;m[A.value+M]!=0;)M+=1;var R=new TextDecoder().decode(m.slice(A.value,A.value+M));return A.value=A.value+M+1,R}function bn(o,A,m){var M=new TextDecoder().decode(new Uint8Array(o).slice(A.value,A.value+m));return A.value=A.value+m,M}function ln(o,A){var m=At(o,A),M=Te(o,A);return[m,M]}function Dn(o,A){var m=Te(o,A),M=Te(o,A);return[m,M]}function At(o,A){var m=o.getInt32(A.value,!0);return A.value=A.value+4,m}function Te(o,A){var m=o.getUint32(A.value,!0);return A.value=A.value+4,m}function Rt(o,A){var m=o[A.value];return A.value=A.value+1,m}function p(o,A){var m=o.getUint8(A.value);return A.value=A.value+1,m}const L=function(o,A){let m;return"getBigInt64"in DataView.prototype?m=Number(o.getBigInt64(A.value,!0)):m=o.getUint32(A.value+4,!0)+Number(o.getUint32(A.value,!0)<<32),A.value+=8,m};function Q(o,A){var m=o.getFloat32(A.value,!0);return A.value+=4,m}function oe(o,A){return _t.toHalfFloat(Q(o,A))}function P(o){var A=(o&31744)>>10,m=o&1023;return(o>>15?-1:1)*(A?A===31?m?NaN:1/0:Math.pow(2,A-15)*(1+m/1024):6103515625e-14*(m/1024))}function xe(o,A){var m=o.getUint16(A.value,!0);return A.value+=2,m}function Xe(o,A){return P(xe(o,A))}function fr(o,A,m,M){for(var R=m.value,T=[];m.value<R+M-1;){var U=Ft(A,m),w=At(o,m),k=p(o,m);m.value+=3;var N=At(o,m),K=At(o,m);T.push({name:U,pixelType:w,pLinear:k,xSampling:N,ySampling:K})}return m.value+=1,T}function un(o,A){var m=Q(o,A),M=Q(o,A),R=Q(o,A),T=Q(o,A),U=Q(o,A),w=Q(o,A),k=Q(o,A),N=Q(o,A);return{redX:m,redY:M,greenX:R,greenY:T,blueX:U,blueY:w,whiteX:k,whiteY:N}}function Ke(o,A){var m=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],M=p(o,A);return m[M]}function je(o,A){var m=Te(o,A),M=Te(o,A),R=Te(o,A),T=Te(o,A);return{xMin:m,yMin:M,xMax:R,yMax:T}}function ht(o,A){var m=["INCREASING_Y"],M=p(o,A);return m[M]}function dt(o,A){var m=Q(o,A),M=Q(o,A);return[m,M]}function ft(o,A){var m=Q(o,A),M=Q(o,A),R=Q(o,A);return[m,M,R]}function Tt(o,A,m,M,R){if(M==="string"||M==="stringvector"||M==="iccProfile")return bn(A,m,R);if(M==="chlist")return fr(o,A,m,R);if(M==="chromaticities")return un(o,m);if(M==="compression")return Ke(o,m);if(M==="box2i")return je(o,m);if(M==="lineOrder")return ht(o,m);if(M==="float")return Q(o,m);if(M==="v2f")return dt(o,m);if(M==="v3f")return ft(o,m);if(M==="int")return At(o,m);if(M==="rational")return ln(o,m);if(M==="timecode")return Dn(o,m);if(M==="preview")return m.value+=R,"skipped";m.value+=R}function gs(o,A,m){const M={};if(o.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";M.version=o.getUint8(4);const R=o.getUint8(5);M.spec={singleTile:!!(R&2),longName:!!(R&4),deepFormat:!!(R&8),multiPart:!!(R&16)},m.value=8;for(var T=!0;T;){var U=Ft(A,m);if(U==0)T=!1;else{var w=Ft(A,m),k=Te(o,m),N=Tt(o,A,m,w,k);N===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${w}'.`):M[U]=N}}if(R&-5)throw console.error("EXRHeader:",M),"THREE.EXRLoader: provided file is currently unsupported.";return M}function Cs(o,A,m,M,R){const T={size:0,viewer:A,array:m,offset:M,width:o.dataWindow.xMax-o.dataWindow.xMin+1,height:o.dataWindow.yMax-o.dataWindow.yMin+1,channels:o.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:o.channels[0].pixelType,uncompress:null,getter:null,format:null,[Kt?"colorSpace":"encoding"]:null};switch(o.compression){case"NO_COMPRESSION":T.lines=1,T.uncompress=It;break;case"RLE_COMPRESSION":T.lines=1,T.uncompress=ut;break;case"ZIPS_COMPRESSION":T.lines=1,T.uncompress=Ut;break;case"ZIP_COMPRESSION":T.lines=16,T.uncompress=Ut;break;case"PIZ_COMPRESSION":T.lines=32,T.uncompress=Tn;break;case"PXR24_COMPRESSION":T.lines=16,T.uncompress=cn;break;case"DWAA_COMPRESSION":T.lines=32,T.uncompress=yt;break;case"DWAB_COMPRESSION":T.lines=256,T.uncompress=yt;break;default:throw"EXRLoader.parse: "+o.compression+" is unsupported"}if(T.scanlineBlockSize=T.lines,T.type==1)switch(R){case We:T.getter=Xe,T.inputSize=2;break;case we:T.getter=xe,T.inputSize=2;break}else if(T.type==2)switch(R){case We:T.getter=Q,T.inputSize=4;break;case we:T.getter=oe,T.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+T.type+" for "+o.compression+".";T.blockCount=(o.dataWindow.yMax+1)/T.scanlineBlockSize;for(var U=0;U<T.blockCount;U++)L(A,M);T.outputChannels=T.channels==3?4:T.channels;const w=T.width*T.height*T.outputChannels;switch(R){case We:T.byteArray=new Float32Array(w),T.channels<T.outputChannels&&T.byteArray.fill(1,0,w);break;case we:T.byteArray=new Uint16Array(w),T.channels<T.outputChannels&&T.byteArray.fill(15360,0,w);break;default:console.error("THREE.EXRLoader: unsupported type: ",R);break}return T.bytesPerLine=T.width*T.inputSize*T.channels,T.outputChannels==4?T.format=Vt:T.format=va,Kt?T.colorSpace="srgb-linear":T.encoding=3e3,T}const An=new DataView(e),vs=new Uint8Array(e),Pt={value:0},Jt=gs(An,e,Pt),ie=Cs(Jt,An,vs,Pt,this.type),mr={value:0},Es={R:0,G:1,B:2,A:3,Y:0};for(let o=0;o<ie.height/ie.scanlineBlockSize;o++){const A=Te(An,Pt);ie.size=Te(An,Pt),ie.lines=A+ie.scanlineBlockSize>ie.height?ie.height-A:ie.scanlineBlockSize;const M=ie.size<ie.lines*ie.bytesPerLine?ie.uncompress(ie):It(ie);Pt.value+=ie.size;for(let R=0;R<ie.scanlineBlockSize;R++){const T=R+o*ie.scanlineBlockSize;if(T>=ie.height)break;for(let U=0;U<ie.channels;U++){const w=Es[Jt.channels[U].name];for(let k=0;k<ie.width;k++){mr.value=(R*(ie.channels*ie.width)+U*ie.width+k)*ie.inputSize;const N=(ie.height-1-T)*(ie.width*ie.outputChannels)+k*ie.outputChannels+w;ie.byteArray[N]=ie.getter(M,mr)}}}}return{header:Jt,width:ie.width,height:ie.height,data:ie.byteArray,format:ie.format,[Kt?"colorSpace":"encoding"]:ie[Kt?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,t,r){function s(a,l){Kt?a.colorSpace=l.colorSpace:a.encoding=l.encoding,a.minFilter=Se,a.magFilter=Se,a.generateMipmaps=!1,a.flipY=!1,n&&n(a,l)}return super.load(e,s,t,r)}}const Un=new WeakMap;class Bo extends Vn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,t,r){const s=new lt(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(n).catch(r)},t,r)}decodeDracoFile(e,n,t,r){const s={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!t};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const c in n.attributeTypes){const u=n.attributeTypes[c];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[c]=u.name)}const t=JSON.stringify(n);if(Un.has(e)){const c=Un.get(e);if(c.key===t)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,l=this._getWorker(s,a).then(c=>(r=c,new Promise((u,d)=>{r._callbacks[s]={resolve:u,reject:d},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Un.set(e,{key:t,promise:l}),l}_createGeometry(e){const n=new Kr;e.index&&n.setIndex(new Zt(e.index.array,1));for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t],s=r.name,a=r.array,l=r.itemSize;n.setAttribute(s,new Zt(a,l))}return n}_loadLibrary(e,n){const t=new lt(this.manager);return t.setPath(this.decoderPath),t.setResponseType(n),t.setWithCredentials(this.withCredentials),new Promise((r,s)=>{t.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const s=go.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[e]=n,t._taskLoad+=n,t})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function go(){let i,e;onmessage=function(a){const l=a.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(d){i.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(i)});break;case"decode":const c=l.buffer,u=l.taskConfig;e.then(d=>{const h=d.draco,f=new h.Decoder,B=new h.DecoderBuffer;B.Init(new Int8Array(c),c.byteLength);try{const C=n(h,f,B,u),v=C.attributes.map(g=>g.array.buffer);C.index&&v.push(C.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:C},v)}catch(C){console.error(C),self.postMessage({type:"error",id:l.id,error:C.message})}finally{h.destroy(B),h.destroy(f)}});break}};function n(a,l,c,u){const d=u.attributeIDs,h=u.attributeTypes;let f,B;const C=l.GetEncodedGeometryType(c);if(C===a.TRIANGULAR_MESH)f=new a.Mesh,B=l.DecodeBufferToMesh(c,f);else if(C===a.POINT_CLOUD)f=new a.PointCloud,B=l.DecodeBufferToPointCloud(c,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!B.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+B.error_msg());const v={index:null,attributes:[]};for(const g in d){const I=self[h[g]];let y,S;if(u.useUniqueIDs)S=d[g],y=l.GetAttributeByUniqueId(f,S);else{if(S=l.GetAttributeId(f,a[d[g]]),S===-1)continue;y=l.GetAttribute(f,S)}v.attributes.push(r(a,l,f,g,I,y))}return C===a.TRIANGULAR_MESH&&(v.index=t(a,l,f)),a.destroy(f),v}function t(a,l,c){const d=c.num_faces()*3,h=d*4,f=a._malloc(h);l.GetTrianglesUInt32Array(c,h,f);const B=new Uint32Array(a.HEAPF32.buffer,f,d).slice();return a._free(f),{array:B,itemSize:1}}function r(a,l,c,u,d,h){const f=h.num_components(),C=c.num_points()*f,v=C*d.BYTES_PER_ELEMENT,g=s(a,d),I=a._malloc(v);l.GetAttributeDataArrayForAllPoints(c,h,g,v,I);const y=new d(a.HEAPF32.buffer,I,C).slice();return a._free(I),{name:u,array:y,itemSize:f}}function s(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let fn;const Pn=()=>{if(fn)return fn;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=i;WebAssembly.validate(n)&&(r=e);let s;const a=WebAssembly.instantiate(l(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function l(h){const f=new Uint8Array(h.length);for(let C=0;C<h.length;++C){const v=h.charCodeAt(C);f[C]=v>96?v-71:v>64?v-65:v>47?v+4:v>46?63:62}let B=0;for(let C=0;C<h.length;++C)f[B++]=f[C]<60?t[f[C]]:(f[C]-60)*64+f[++C];return f.buffer.slice(0,B)}function c(h,f,B,C,v,g){const I=s.exports.sbrk,y=B+3&-4,S=I(y*C),x=I(v.length),b=new Uint8Array(s.exports.memory.buffer);b.set(v,x);const E=h(S,B,C,x,v.length);if(E===0&&g&&g(S,y,C),f.set(b.subarray(S,S+B*C)),I(S-I(0)),E!==0)throw new Error(`Malformed buffer data: ${E}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return fn={ready:a,supported:!0,decodeVertexBuffer(h,f,B,C,v){c(s.exports.meshopt_decodeVertexBuffer,h,f,B,C,s.exports[u[v]])},decodeIndexBuffer(h,f,B,C){c(s.exports.meshopt_decodeIndexBuffer,h,f,B,C)},decodeIndexSequence(h,f,B,C){c(s.exports.meshopt_decodeIndexSequence,h,f,B,C)},decodeGltfBuffer(h,f,B,C,v,g){c(s.exports[d[v]],h,f,B,C,s.exports[u[g]])}},fn};function is(i,e,n,t){const r=class extends Ht{constructor(a={}){const l=Object.entries(i);super({uniforms:l.reduce((c,[u,d])=>{const h=Ea.clone({[u]:{value:d}});return{...c,...h}},{}),vertexShader:e,fragmentShader:n}),this.key="",l.forEach(([c])=>Object.defineProperty(this,c,{get:()=>this.uniforms[c].value,set:u=>this.uniforms[c].value=u})),Object.assign(this,a)}};return r.key=Yt.generateUUID(),r}const Co=()=>parseInt(Ur.replace(/\D+/g,"")),os=Co();let mn=null,cs="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function ls(i=!0,e=!0,n){return t=>{n&&n(t),i&&(mn||(mn=new Bo),mn.setDecoderPath(typeof i=="string"?i:cs),t.setDRACOLoader(mn)),e&&t.setMeshoptDecoder(typeof Pn=="function"?Pn():Pn)}}const rt=(i,e,n,t)=>vt(nr,i,ls(e,n,t));rt.preload=(i,e,n,t)=>vt.preload(nr,i,ls(e,n,t));rt.clear=i=>vt.clear(nr,i);rt.setDecoderPath=i=>{cs=i};function vo(i,e,n){const t=pe(f=>f.size),r=pe(f=>f.viewport),s=typeof i=="number"?i:t.width*r.dpr,a=t.height*r.dpr,l=(typeof i=="number"?n:i)||{},{samples:c=0,depth:u,...d}=l,h=F.useMemo(()=>{const f=new Et(s,a,{minFilter:Se,magFilter:Se,type:we,...d});return u&&(f.depthTexture=new Ma(s,a,We)),f.samples=c,f},[]);return F.useLayoutEffect(()=>{h.setSize(s,a),c&&(h.samples=c)},[c,h,s,a]),F.useEffect(()=>()=>h.dispose(),[]),h}const Eo=i=>typeof i=="function",rr=F.forwardRef(({envMap:i,resolution:e=256,frames:n=1/0,makeDefault:t,children:r,...s},a)=>{const l=pe(({set:g})=>g),c=pe(({camera:g})=>g),u=pe(({size:g})=>g),d=F.useRef(null);F.useImperativeHandle(a,()=>d.current,[]);const h=F.useRef(null),f=vo(e);F.useLayoutEffect(()=>{s.manual||(d.current.aspect=u.width/u.height)},[u,s]),F.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let B=0,C=null;const v=Eo(r);return Mt(g=>{v&&(n===1/0||B<n)&&(h.current.visible=!1,g.gl.setRenderTarget(f),C=g.scene.background,i&&(g.scene.background=i),g.gl.render(g.scene,d.current),g.scene.background=C,g.gl.setRenderTarget(null),h.current.visible=!0,B++)}),F.useLayoutEffect(()=>{if(t){const g=c;return l(()=>({camera:d.current})),()=>l(()=>({camera:g}))}},[d,t,l]),F.createElement(F.Fragment,null,F.createElement("perspectiveCamera",Ye({ref:d},s),!v&&r),F.createElement("group",{ref:h},v&&r(f.texture)))}),sr=F.forwardRef(({makeDefault:i,camera:e,regress:n,domElement:t,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:l,onEnd:c,...u},d)=>{const h=pe(E=>E.invalidate),f=pe(E=>E.camera),B=pe(E=>E.gl),C=pe(E=>E.events),v=pe(E=>E.setEvents),g=pe(E=>E.set),I=pe(E=>E.get),y=pe(E=>E.performance),S=e||f,x=t||C.connected||B.domElement,b=F.useMemo(()=>new Gi(S),[S]);return Mt(()=>{b.enabled&&b.update()},-1),F.useEffect(()=>(s&&b.connect(s===!0?x:s),b.connect(x),()=>void b.dispose()),[s,x,n,b,h]),F.useEffect(()=>{const E=G=>{h(),n&&y.regress(),a&&a(G)},_=G=>{l&&l(G)},D=G=>{c&&c(G)};return b.addEventListener("change",E),b.addEventListener("start",_),b.addEventListener("end",D),()=>{b.removeEventListener("start",_),b.removeEventListener("end",D),b.removeEventListener("change",E)}},[a,l,c,b,h,v]),F.useEffect(()=>{if(i){const E=I().controls;return g({controls:b}),()=>g({controls:E})}},[i,b]),F.createElement("primitive",Ye({ref:d,object:b,enableDamping:r},u))});function ar(i,e){const n=F.useRef(),[t]=F.useState(()=>e?e instanceof Cn?{current:e}:e:n),[r]=F.useState(()=>new Ia(void 0));F.useLayoutEffect(()=>{e&&(t.current=e instanceof Cn?e:e.current),r._root=t.current});const s=F.useRef({}),a=F.useMemo(()=>{const l={};return i.forEach(c=>Object.defineProperty(l,c.name,{enumerable:!0,get(){if(t.current)return s.current[c.name]||(s.current[c.name]=r.clipAction(c,t.current))},configurable:!0})),{ref:t,clips:i,actions:l,names:i.map(c=>c.name),mixer:r}},[i]);return Mt((l,c)=>r.update(c)),F.useEffect(()=>{const l=t.current;return()=>{s.current={},r.stopAllAction(),Object.values(a.actions).forEach(c=>{l&&r.uncacheAction(c,l)})}},[i]),a}const Mo=F.forwardRef(function({children:e,disable:n,disableX:t,disableY:r,disableZ:s,left:a,right:l,top:c,bottom:u,front:d,back:h,onCentered:f,precise:B=!0,cacheKey:C=0,...v},g){const I=F.useRef(null),y=F.useRef(null),S=F.useRef(null);return F.useLayoutEffect(()=>{y.current.matrixWorld.identity();const x=new zn().setFromObject(S.current,B),b=new ee,E=new Qr,_=x.max.x-x.min.x,D=x.max.y-x.min.y,G=x.max.z-x.min.z;x.getCenter(b),x.getBoundingSphere(E);const O=c?D/2:u?-D/2:0,Z=a?-_/2:l?_/2:0,z=d?G/2:h?-G/2:0;y.current.position.set(n||t?0:-b.x+Z,n||r?0:-b.y+O,n||s?0:-b.z+z),typeof f<"u"&&f({parent:I.current.parent,container:I.current,width:_,height:D,depth:G,boundingBox:x,boundingSphere:E,center:b,verticalAlignment:O,horizontalAlignment:Z,depthAlignment:z})},[C,f,c,a,d,n,t,r,s,B,l,u,h]),F.useImperativeHandle(g,()=>I.current,[]),F.createElement("group",Ye({ref:I},v),F.createElement("group",{ref:y},F.createElement("group",{ref:S},e)))}),Io=3e3,yo=3001,Fo=is({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");var Je=function(i){return i[i.NONE=0]="NONE",i[i.START=1]="START",i[i.ACTIVE=2]="ACTIVE",i}(Je||{});const Gt=i=>i&&i.isOrthographicCamera,Ro=i=>i&&i.isBox3,To=i=>1-Math.exp(-5*i)+.007*i,us=F.createContext(null);function bo({children:i,maxDuration:e=1,margin:n=1.2,observe:t,fit:r,clip:s,interpolateFunc:a=To,onFit:l}){const c=F.useRef(null),{camera:u,size:d,invalidate:h}=pe(),f=pe(b=>b.controls),B=F.useRef(l);B.current=l;const C=F.useRef({camPos:new ee,camRot:new gt,camZoom:1}),v=F.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),g=F.useRef(Je.NONE),I=F.useRef(0),[y]=F.useState(()=>new zn),S=F.useMemo(()=>{function b(){const E=y.getSize(new ee),_=y.getCenter(new ee),D=Math.max(E.x,E.y,E.z),G=Gt(u)?D*4:D/(2*Math.atan(Math.PI*u.fov/360)),O=Gt(u)?D*4:G/u.aspect,Z=n*Math.max(G,O);return{box:y,size:E,center:_,distance:Z}}return{getSize:b,refresh(E){if(Ro(E))y.copy(E);else{const _=E||c.current;if(!_)return this;_.updateWorldMatrix(!0,!0),y.setFromObject(_)}if(y.isEmpty()){const _=u.position.length()||10;y.setFromCenterAndSize(new ee,new ee(_,_,_))}return C.current.camPos.copy(u.position),C.current.camRot.copy(u.quaternion),Gt(u)&&(C.current.camZoom=u.zoom),v.current.camPos=void 0,v.current.camRot=void 0,v.current.camZoom=void 0,v.current.camUp=void 0,v.current.target=void 0,this},reset(){const{center:E,distance:_}=b(),D=u.position.clone().sub(E).normalize();v.current.camPos=E.clone().addScaledVector(D,_),v.current.target=E.clone();const G=new Ct().lookAt(v.current.camPos,v.current.target,u.up);return v.current.camRot=new gt().setFromRotationMatrix(G),g.current=Je.START,I.current=0,this},moveTo(E){return v.current.camPos=Array.isArray(E)?new ee(...E):E.clone(),g.current=Je.START,I.current=0,this},lookAt({target:E,up:_}){v.current.target=Array.isArray(E)?new ee(...E):E.clone(),_?v.current.camUp=Array.isArray(_)?new ee(..._):_.clone():v.current.camUp=u.up.clone();const D=new Ct().lookAt(v.current.camPos||u.position,v.current.target,v.current.camUp);return v.current.camRot=new gt().setFromRotationMatrix(D),g.current=Je.START,I.current=0,this},to({position:E,target:_}){return this.moveTo(E).lookAt({target:_})},fit(){if(!Gt(u))return this.reset();let E=0,_=0;const D=[new ee(y.min.x,y.min.y,y.min.z),new ee(y.min.x,y.max.y,y.min.z),new ee(y.min.x,y.min.y,y.max.z),new ee(y.min.x,y.max.y,y.max.z),new ee(y.max.x,y.max.y,y.max.z),new ee(y.max.x,y.max.y,y.min.z),new ee(y.max.x,y.min.y,y.max.z),new ee(y.max.x,y.min.y,y.min.z)],G=v.current.camPos||u.position,O=v.current.target||(f==null?void 0:f.target),Z=v.current.camUp||u.up,z=O?new Ct().lookAt(G,O,Z).setPosition(G).invert():u.matrixWorldInverse;for(const ne of D)ne.applyMatrix4(z),E=Math.max(E,Math.abs(ne.y)),_=Math.max(_,Math.abs(ne.x));E*=2,_*=2;const V=(u.top-u.bottom)/E,j=(u.right-u.left)/_;return v.current.camZoom=Math.min(V,j)/n,g.current=Je.START,I.current=0,B.current&&B.current(this.getSize()),this},clip(){const{distance:E}=b();return u.near=E/100,u.far=E*100,u.updateProjectionMatrix(),f&&(f.maxDistance=E*10,f.update()),h(),this}}},[y,u,f,n,h]);F.useLayoutEffect(()=>{if(f){const b=()=>{if(f&&v.current.target&&g.current!==Je.NONE){const E=new ee().setFromMatrixColumn(u.matrix,2),_=C.current.camPos.distanceTo(f.target),D=(v.current.camPos||C.current.camPos).distanceTo(v.current.target),G=(1-I.current)*_+I.current*D;f.target.copy(u.position).addScaledVector(E,-G),f.update()}g.current=Je.NONE};return f.addEventListener("start",b),()=>f.removeEventListener("start",b)}},[f]);const x=F.useRef(0);return F.useLayoutEffect(()=>{(t||x.current++===0)&&(S.refresh(),r&&S.reset().fit(),s&&S.clip())},[d,s,r,t,u,f]),Mt((b,E)=>{if(g.current===Je.START)g.current=Je.ACTIVE,h();else if(g.current===Je.ACTIVE){if(I.current+=E/e,I.current>=1)v.current.camPos&&u.position.copy(v.current.camPos),v.current.camRot&&u.quaternion.copy(v.current.camRot),v.current.camUp&&u.up.copy(v.current.camUp),v.current.camZoom&&Gt(u)&&(u.zoom=v.current.camZoom),u.updateMatrixWorld(),u.updateProjectionMatrix(),f&&v.current.target&&(f.target.copy(v.current.target),f.update()),g.current=Je.NONE;else{const _=a(I.current);v.current.camPos&&u.position.lerpVectors(C.current.camPos,v.current.camPos,_),v.current.camRot&&u.quaternion.slerpQuaternions(C.current.camRot,v.current.camRot,_),v.current.camUp&&u.up.set(0,1,0).applyQuaternion(u.quaternion),v.current.camZoom&&Gt(u)&&(u.zoom=(1-_)*C.current.camZoom+_*v.current.camZoom),u.updateMatrixWorld(),u.updateProjectionMatrix()}h()}}),F.createElement("group",{ref:c},F.createElement(us.Provider,{value:S},i))}function Do(){return F.useContext(us)}const As=(i,e,n)=>{let t;switch(i){case jn:t=new Uint8ClampedArray(e*n*4);break;case we:t=new Uint16Array(e*n*4);break;case Da:t=new Uint32Array(e*n*4);break;case ba:t=new Int8Array(e*n*4);break;case Ta:t=new Int16Array(e*n*4);break;case Ra:t=new Int32Array(e*n*4);break;case We:t=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return t};let pn;const Go=(i,e,n,t)=>{if(pn!==void 0)return pn;const r=new Et(1,1,t);e.setRenderTarget(r);const s=new qt(new qn,new xt({color:16777215}));e.render(s,n),e.setRenderTarget(null);const a=As(i,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),s.geometry.dispose(),s.material.dispose(),pn=a[0]!==0,pn};class ir{constructor(e){var n,t,r,s,a,l,c,u,d,h,f,B,C,v,g,I;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(S){throw this._renderer.setRenderTarget(null),S}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const y={format:Vt,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy)!==void 0?(t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter:Se,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter:Se,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.samples:void 0,wrapS:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.wrapS)!==void 0?(B=e.renderTargetOptions)===null||B===void 0?void 0:B.wrapS:tt,wrapT:((C=e.renderTargetOptions)===null||C===void 0?void 0:C.wrapT)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.wrapT:tt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=ir.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Zr,this._camera=new Qt,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Go(this._type,this._renderer,this._camera,y)){let S;switch(this._type){case we:S=this._renderer.extensions.has("EXT_color_buffer_float")?We:void 0;break}S!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${We}`),this._type=S):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new qt(new qn,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Et(this.width,this.height,y),this._renderTarget.texture.mapping=((g=e.renderTargetOptions)===null||g===void 0?void 0:g.mapping)!==void 0?(I=e.renderTargetOptions)===null||I===void 0?void 0:I.mapping:vn}static instantiateRenderer(){const e=new ya;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=As(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new Fa(this.toArray(),this.width,this.height,Vt,this._type,(e==null?void 0:e.mapping)||vn,(e==null?void 0:e.wrapS)||tt,(e==null?void 0:e.wrapT)||tt,(e==null?void 0:e.magFilter)||Se,(e==null?void 0:e.minFilter)||Se,(e==null?void 0:e.anisotropy)||1,Kn);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ht&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof ot&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof ot&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const xo=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,_o=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class So extends Ht{constructor({gamma:e,offsetHdr:n,offsetSdr:t,gainMapMin:r,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:l,hdrCapacityMax:c,sdr:u,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:xo,fragmentShader:_o,uniforms:{sdr:{value:u},gainMap:{value:d},gamma:{value:new ee(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new ee().fromArray(n)},offsetSdr:{value:new ee().fromArray(t)},gainMapMin:{value:new ee().fromArray(r)},gainMapMax:{value:new ee().fromArray(s)},weightFactor:{value:(Math.log2(a)-l)/(c-l)}},blending:_a,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=l,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const n=this.uniforms.gamma.value;n.x=1/e[0],n.y=1/e[1],n.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class hs extends Error{}class ds extends Error{}const jt=(i,e,n)=>{const t=new RegExp(`${e}="([^"]*)"`,"i").exec(i);if(t)return t[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(i);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},wo=i=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(i):e=i.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const t=e.indexOf("x:xmpmeta>",n),r=e.slice(n,t+10);try{const s=jt(r,"hdrgm:GainMapMin","0"),a=jt(r,"hdrgm:GainMapMax"),l=jt(r,"hdrgm:Gamma","1"),c=jt(r,"hdrgm:OffsetSDR","0.015625"),u=jt(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),h=d?d[1]:"0",f=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!f)throw new Error("Incomplete gainmap metadata");const B=f[1];return{gainMapMin:Array.isArray(s)?s.map(C=>parseFloat(C)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(C=>parseFloat(C)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(l)?l.map(C=>parseFloat(C)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(c)?c.map(C=>parseFloat(C)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(u)?u.map(C=>parseFloat(C)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(B)}}catch{}n=e.indexOf("<x:xmpmeta",t)}};class Ho{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,t)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){t(new Error("Not a valid jpeg"));return}const a=s.byteLength;let l=2,c=0,u;for(;l<a;){if(++c>250){t(new Error(`Found no marker after ${c} loops 😵`));return}if(s.getUint8(l)!==255){t(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${s.getUint8(l).toString(16)}`));return}if(u=s.getUint8(l+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const d=l+4;if(s.getUint32(d)===1297106432){const h=d+4;let f;if(s.getUint16(h)===18761)f=!1;else if(s.getUint16(h)===19789)f=!0;else{t(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!f)!==42){t(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const B=s.getUint32(h+4,!f);if(B<8){t(new Error("Not valid TIFF data! (First offset less than 8)"));return}const C=h+B,v=s.getUint16(C,!f),g=C+2;let I=0;for(let b=g;b<g+12*v;b+=12)s.getUint16(b,!f)===45057&&(I=s.getUint32(b+8,!f));const S=C+2+v*12+4,x=[];for(let b=S;b<S+I*16;b+=16){const E={MPType:s.getUint32(b,!f),size:s.getUint32(b+4,!f),dataOffset:s.getUint32(b+8,!f),dependantImages:s.getUint32(b+12,!f),start:-1,end:-1,isFII:!1};E.dataOffset?(E.start=h+E.dataOffset,E.isFII=!1):(E.start=0,E.isFII=!0),E.end=E.start+E.size,x.push(E)}if(this.options.extractNonFII&&x.length){const b=new Blob([s]),E=[];for(const _ of x){if(_.isFII&&!this.options.extractFII)continue;const D=b.slice(_.start,_.end+1,"image/jpeg");E.push(D)}n(E)}}}l+=2+s.getUint16(l+2)}})}}const Lo=async i=>{const e=wo(i);if(!e)throw new ds("Gain map XMP metadata not found");const t=await new Ho({extractFII:!0,extractNonFII:!0}).extract(i);if(t.length!==2)throw new hs("Gain map recovery image not found");return{sdr:new Uint8Array(await t[0].arrayBuffer()),gainMap:new Uint8Array(await t[1].arrayBuffer()),metadata:e}},Sr=i=>new Promise((e,n)=>{const t=document.createElement("img");t.onload=()=>{e(t)},t.onerror=r=>{n(r)},t.src=URL.createObjectURL(i)});class fs extends Vn{constructor(e,n){super(n),e&&(this._renderer=e),this._internalLoadingManager=new Ga}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new So({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ot,sdr:new ot});return new ir({width:16,height:16,type:we,colorSpace:Kn,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,n,t,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([t],{type:"image/jpeg"});let l,c,u=!1;if(typeof createImageBitmap>"u"){const f=await Promise.all([s?Sr(s):Promise.resolve(void 0),Sr(a)]);c=f[0],l=f[1],u=!0}else{const f=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);c=f[0],l=f[1]}const d=new ot(c||new ImageData(2,2),vn,tt,tt,Se,vr,Vt,jn,1,Kn);d.flipY=u,d.needsUpdate=!0;const h=new ot(l,vn,tt,tt,Se,vr,Vt,jn,1,xa);h.flipY=u,h.needsUpdate=!0,e.width=l.width,e.height=l.height,e.material.gainMap=d,e.material.sdr=h,e.material.gainMapMin=n.gainMapMin,e.material.gainMapMax=n.gainMapMax,e.material.offsetHdr=n.offsetHdr,e.material.offsetSdr=n.offsetSdr,e.material.gamma=n.gamma,e.material.hdrCapacityMin=n.hdrCapacityMin,e.material.hdrCapacityMax=n.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,n.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class Oo extends fs{load([e,n,t],r,s,a){const l=this.prepareQuadRenderer();let c,u,d;const h=async()=>{if(c&&u&&d){try{await this.render(l,d,c,u)}catch(G){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(t),typeof a=="function"&&a(G),l.disposeOnDemandRenderer();return}typeof r=="function"&&r(l),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(t),l.disposeOnDemandRenderer()}};let f=!0,B=0,C=0,v=!0,g=0,I=0,y=!0,S=0,x=0;const b=()=>{if(typeof s=="function"){const G=B+g+S,O=C+I+x,Z=f&&v&&y;s(new ProgressEvent("progress",{lengthComputable:Z,loaded:O,total:G}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(t);const E=new lt(this._internalLoadingManager);E.setResponseType("arraybuffer"),E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(this.withCredentials),E.load(e,async G=>{if(typeof G=="string")throw new Error("Invalid sdr buffer");c=G,await h()},G=>{f=G.lengthComputable,C=G.loaded,B=G.total,b()},G=>{this.manager.itemError(e),typeof a=="function"&&a(G)});const _=new lt(this._internalLoadingManager);_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setPath(this.path),_.setWithCredentials(this.withCredentials),_.load(n,async G=>{if(typeof G=="string")throw new Error("Invalid gainmap buffer");u=G,await h()},G=>{v=G.lengthComputable,I=G.loaded,g=G.total,b()},G=>{this.manager.itemError(n),typeof a=="function"&&a(G)});const D=new lt(this._internalLoadingManager);return D.setRequestHeader(this.requestHeader),D.setPath(this.path),D.setWithCredentials(this.withCredentials),D.load(t,async G=>{if(typeof G!="string")throw new Error("Invalid metadata string");d=JSON.parse(G),await h()},G=>{y=G.lengthComputable,x=G.loaded,S=G.total,b()},G=>{this.manager.itemError(t),typeof a=="function"&&a(G)}),l}}class Uo extends fs{load(e,n,t,r){const s=this.prepareQuadRenderer(),a=new lt(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(l);let u,d,h;try{const f=await Lo(c);u=f.sdr,d=f.gainMap,h=f.metadata}catch(f){if(f instanceof ds||f instanceof hs)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=c;else throw f}try{await this.render(s,h,u,d)}catch(f){this.manager.itemError(e),typeof r=="function"&&r(f),s.disposeOnDemandRenderer();return}typeof n=="function"&&n(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},t,l=>{this.manager.itemError(e),typeof r=="function"&&r(l)}),s}}const zt={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ms="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",wt=i=>Array.isArray(i),or=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Mn({files:i=or,path:e="",preset:n=void 0,encoding:t=void 0,extensions:r}={}){let s=null,a=!1;n&&(cr(n),i=zt[n],e=ms),a=wt(i);const{extension:l,isCubemap:c}=lr(i);if(s=ur(l),!s)throw new Error("useEnvironment: Unrecognized file extension: "+i);const u=pe(B=>B.gl);F.useLayoutEffect(()=>{if(l!=="webp"&&l!=="jpg"&&l!=="jpeg")return;function B(){vt.clear(s,a?[i]:i)}u.domElement.addEventListener("webglcontextlost",B,{once:!0})},[i,u.domElement]);const d=vt(s,a?[i]:i,B=>{(l==="webp"||l==="jpg"||l==="jpeg")&&B.setRenderer(u),B.setPath==null||B.setPath(e),r&&r(B)});let h=a?d[0]:d;if(l==="jpg"||l==="jpeg"||l==="webp"){var f;h=(f=h.renderTarget)==null?void 0:f.texture}return h.mapping=c?Sa:wa,"colorSpace"in h?h.colorSpace=t??c?"srgb":"srgb-linear":h.encoding=t??c?yo:Io,h}const Po={files:or,path:"",preset:void 0,extensions:void 0};Mn.preload=i=>{const e={...Po,...i};let{files:n,path:t=""}=e;const{preset:r,extensions:s}=e;r&&(cr(r),n=zt[r],t=ms);const{extension:a}=lr(n);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=ur(a);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+n);vt.preload(l,wt(n)?[n]:n,c=>{c.setPath==null||c.setPath(t),s&&s(c)})};const Jo={files:or,preset:void 0};Mn.clear=i=>{const e={...Jo,...i};let{files:n}=e;const{preset:t}=e;t&&(cr(t),n=zt[t]);const{extension:r}=lr(n),s=ur(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);vt.clear(s,wt(n)?[n]:n)};function cr(i){if(!(i in zt))throw new Error("Preset must be one of: "+Object.keys(zt).join(", "))}function lr(i){var e;const n=wt(i)&&i.length===6,t=wt(i)&&i.length===3&&i.some(a=>a.endsWith("json")),r=wt(i)?i[0]:i;return{extension:n?"cube":t?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:t}}function ur(i){return i==="cube"?Ha:i==="hdr"?mo:i==="exr"?po:i==="jpg"||i==="jpeg"?Uo:i==="webp"?Oo:null}const No=i=>i.current&&i.current.isScene,ko=i=>No(i)?i.current:i;function Ar(i,e,n,t,r={}){var s,a,l,c;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=ko(e||n),d=u.background,h=u.environment,f={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(l=(c=u.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&l!==void 0?l:[0,0,0]};return i!=="only"&&(u.environment=t),i&&(u.background=t),Er(u,r),()=>{i!=="only"&&(u.environment=h),i&&(u.background=d),Er(u,f)}}function hr({scene:i,background:e=!1,map:n,...t}){const r=pe(s=>s.scene);return F.useLayoutEffect(()=>{if(n)return Ar(e,i,r,n,t)}),null}function ps({background:i=!1,scene:e,blur:n,backgroundBlurriness:t,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:l,...c}){const u=Mn(c),d=pe(h=>h.scene);return F.useLayoutEffect(()=>Ar(i,e,d,u,{backgroundBlurriness:n??t,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:l})),F.useEffect(()=>()=>{u.dispose()},[u]),null}function Ko({children:i,near:e=.1,far:n=1e3,resolution:t=256,frames:r=1,map:s,background:a=!1,blur:l,backgroundBlurriness:c,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:h,environmentRotation:f,scene:B,files:C,path:v,preset:g=void 0,extensions:I}){const y=pe(D=>D.gl),S=pe(D=>D.scene),x=F.useRef(null),[b]=F.useState(()=>new Zr),E=F.useMemo(()=>{const D=new La(t);return D.texture.type=we,D},[t]);F.useEffect(()=>()=>{E.dispose()},[E]),F.useLayoutEffect(()=>{if(r===1){const D=y.autoClear;y.autoClear=!0,x.current.update(y,b),y.autoClear=D}return Ar(a,B,S,E.texture,{backgroundBlurriness:l??c,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:h,environmentRotation:f})},[i,b,E.texture,B,S,a,r,y]);let _=1;return Mt(()=>{if(r===1/0||_<r){const D=y.autoClear;y.autoClear=!0,x.current.update(y,b),y.autoClear=D,_++}}),F.createElement(F.Fragment,null,Oa(F.createElement(F.Fragment,null,i,F.createElement("cubeCamera",{ref:x,args:[e,n,E]}),C||g?F.createElement(ps,{background:!0,files:C,preset:g,path:v,extensions:I}):s?F.createElement(hr,{background:!0,map:s,extensions:I}):null),b))}function jo(i){var e,n,t,r;const s=Mn(i),a=i.map||s;F.useMemo(()=>Yr({GroundProjectedEnvImpl:Mi}),[]),F.useEffect(()=>()=>{s.dispose()},[s]);const l=F.useMemo(()=>[a],[a]),c=(e=i.ground)==null?void 0:e.height,u=(n=i.ground)==null?void 0:n.radius,d=(t=(r=i.ground)==null?void 0:r.scale)!==null&&t!==void 0?t:1e3;return F.createElement(F.Fragment,null,F.createElement(hr,Ye({},i,{map:a})),F.createElement("groundProjectedEnvImpl",{args:l,scale:d,height:c,radius:u}))}function Qo(i){return i.ground?F.createElement(jo,i):i.map?F.createElement(hr,i):i.children?F.createElement(Ko,i):F.createElement(ps,i)}const Xo=F.forwardRef(({scale:i=10,frames:e=1/0,opacity:n=1,width:t=1,height:r=1,blur:s=1,near:a=0,far:l=10,resolution:c=512,smooth:u=!0,color:d="#000000",depthWrite:h=!1,renderOrder:f,...B},C)=>{const v=F.useRef(null),g=pe(j=>j.scene),I=pe(j=>j.gl),y=F.useRef(null);t=t*(Array.isArray(i)?i[0]:i||1),r=r*(Array.isArray(i)?i[1]:i||1);const[S,x,b,E,_,D,G]=F.useMemo(()=>{const j=new Et(c,c),ne=new Et(c,c);ne.texture.generateMipmaps=j.texture.generateMipmaps=!1;const q=new qn(t,r).rotateX(Math.PI/2),Ae=new qt(q),ce=new Ua;ce.depthTest=ce.depthWrite=!1,ce.onBeforeCompile=Me=>{Me.uniforms={...Me.uniforms,ucolor:{value:new Ve(d)}},Me.fragmentShader=Me.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Me.fragmentShader=Me.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Ie=new Ht(ho),se=new Ht(fo);return se.depthTest=Ie.depthTest=!1,[j,q,ce,Ae,Ie,se,ne]},[c,t,r,i,d]),O=j=>{E.visible=!0,E.material=_,_.uniforms.tDiffuse.value=S.texture,_.uniforms.h.value=j*1/256,I.setRenderTarget(G),I.render(E,y.current),E.material=D,D.uniforms.tDiffuse.value=G.texture,D.uniforms.v.value=j*1/256,I.setRenderTarget(S),I.render(E,y.current),E.visible=!1};let Z=0,z,V;return Mt(()=>{y.current&&(e===1/0||Z<e)&&(Z++,z=g.background,V=g.overrideMaterial,v.current.visible=!1,g.background=null,g.overrideMaterial=b,I.setRenderTarget(S),I.render(g,y.current),O(s),u&&O(s*.4),I.setRenderTarget(null),v.current.visible=!0,g.overrideMaterial=V,g.background=z)}),F.useImperativeHandle(C,()=>v.current,[]),F.createElement("group",Ye({"rotation-x":Math.PI/2},B,{ref:v}),F.createElement("mesh",{renderOrder:f,geometry:x,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},F.createElement("meshBasicMaterial",{transparent:!0,map:S.texture,opacity:n,depthWrite:h})),F.createElement("orthographicCamera",{ref:y,args:[-t/2,t/2,r/2,-r/2,a,l]}))});function Zo(i){return i.isLight}function Yo(i){return!!i.geometry}const Bs=F.createContext(null),Wo=is({color:new Ve,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${os>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),Vo=F.forwardRef(({children:i,temporal:e,frames:n=40,limit:t=1/0,blend:r=20,scale:s=10,opacity:a=1,alphaTest:l=.75,color:c="black",colorBlend:u=2,resolution:d=1024,toneMapped:h=!0,...f},B)=>{Yr({SoftShadowMaterial:Wo});const C=pe(E=>E.gl),v=pe(E=>E.scene),g=pe(E=>E.camera),I=pe(E=>E.invalidate),y=F.useRef(null),S=F.useRef(null),[x]=F.useState(()=>new qo(C,v,d));F.useLayoutEffect(()=>{x.configure(y.current)},[]);const b=F.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,n),blend:Math.max(2,n===1/0?r:n),count:0,getMesh:()=>y.current,reset:()=>{x.clear();const E=y.current.material;E.opacity=0,E.alphaTest=0,b.count=0},update:(E=1)=>{const _=y.current.material;b.temporal?(_.opacity=Math.min(a,_.opacity+a/b.blend),_.alphaTest=Math.min(l,_.alphaTest+l/b.blend)):(_.opacity=a,_.alphaTest=l),S.current.visible=!0,x.prepare();for(let D=0;D<E;D++)b.lights.forEach(G=>G.update()),x.update(g,b.blend);S.current.visible=!1,x.finish()}}),[x,g,v,e,n,r,a,l]);return F.useLayoutEffect(()=>{b.reset(),!b.temporal&&b.frames!==1/0&&b.update(b.blend)}),F.useImperativeHandle(B,()=>b,[b]),Mt(()=>{(b.temporal||b.frames===1/0)&&b.count<b.frames&&b.count<t&&(I(),b.update(),b.count++)}),F.createElement("group",f,F.createElement("group",{traverse:()=>null,ref:S},F.createElement(Bs.Provider,{value:b},i)),F.createElement("mesh",{receiveShadow:!0,ref:y,scale:s,rotation:[-Math.PI/2,0,0]},F.createElement("planeGeometry",null),F.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:h,color:c,blend:u,map:x.progressiveLightMap2.texture})))}),zo=F.forwardRef(({castShadow:i=!0,bias:e=.001,mapSize:n=512,size:t=5,near:r=.5,far:s=500,frames:a=1,position:l=[0,0,0],radius:c=1,amount:u=8,intensity:d=os>=155?Math.PI:1,ambient:h=.5,...f},B)=>{const C=F.useRef(null),v=new ee(...l).length(),g=F.useContext(Bs),I=F.useCallback(()=>{let S;if(C.current)for(let x=0;x<C.current.children.length;x++)if(S=C.current.children[x],Math.random()>h)S.position.set(l[0]+Yt.randFloatSpread(c),l[1]+Yt.randFloatSpread(c),l[2]+Yt.randFloatSpread(c));else{let b=Math.acos(2*Math.random()-1)-Math.PI/2,E=2*Math.PI*Math.random();S.position.set(Math.cos(b)*Math.cos(E)*v,Math.abs(Math.cos(b)*Math.sin(E)*v),Math.sin(b)*v)}},[c,h,v,...l]),y=F.useMemo(()=>({update:I}),[I]);return F.useImperativeHandle(B,()=>y,[y]),F.useLayoutEffect(()=>{var S;const x=C.current;return g&&((S=g.lights)==null||S.set(x.uuid,y)),()=>{var b;return void(g==null||(b=g.lights)==null?void 0:b.delete(x.uuid))}},[g,y]),F.createElement("group",Ye({ref:C},f),Array.from({length:u},(S,x)=>F.createElement("directionalLight",{key:x,castShadow:i,"shadow-bias":e,"shadow-mapSize":[n,n],intensity:d/u},F.createElement("orthographicCamera",{attach:"shadow-camera",args:[-t,t,t,-t,r,s]}))))});class qo{constructor(e,n,t=1024){this.renderer=e,this.res=t,this.scene=n,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new Ve,this.clearAlpha=0;const r={type:we,magFilter:kn,minFilter:kn};this.progressiveLightMap1=new Et(this.res,this.res,r),this.progressiveLightMap2=new Et(this.res,this.res,r),this.discardMat=new Fo,this.targetMat=new Pa({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const a=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,a)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(a-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{Yo(e)?this.meshes.push({object:e,material:e.material}):Zo(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,n=100){if(!this.object)return;this.averagingWindow.value=n,this.object.material=this.targetMat;const t=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(t),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const $o={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function ec({radius:i,adjustCamera:e}){const n=Do();return F.useEffect(()=>{e&&n.refresh().clip().fit()},[i,e]),null}function dr({children:i,center:e,adjustCamera:n=!0,intensity:t=.5,shadows:r="contact",environment:s="city",preset:a="rembrandt",...l}){var c,u,d,h,f,B,C,v;const g=typeof a=="string"?$o[a]:a,[{radius:I,height:y},S]=F.useState({radius:0,width:0,height:0,depth:0}),x=(c=r==null?void 0:r.bias)!==null&&c!==void 0?c:-1e-4,b=(u=r==null?void 0:r.normalBias)!==null&&u!==void 0?u:0,E=(d=r==null?void 0:r.size)!==null&&d!==void 0?d:1024,_=(h=r==null?void 0:r.offset)!==null&&h!==void 0?h:0,D=r==="contact"||(r==null?void 0:r.type)==="contact",G=r==="accumulative"||(r==null?void 0:r.type)==="accumulative",O={...typeof r=="object"?r:{}},Z=s?typeof s=="string"?{preset:s}:s:null,z=F.useCallback(V=>{const{width:j,height:ne,depth:q,boundingSphere:Ae}=V;S({radius:Ae.radius,width:j,height:ne,depth:q}),e!=null&&e.onCentered&&e.onCentered(V)},[]);return F.createElement(F.Fragment,null,F.createElement("ambientLight",{intensity:t/3}),F.createElement("spotLight",{penumbra:1,position:[g.main[0]*I,g.main[1]*I,g.main[2]*I],intensity:t*2,castShadow:!!r,"shadow-bias":x,"shadow-normalBias":b,"shadow-mapSize":E}),F.createElement("pointLight",{position:[g.fill[0]*I,g.fill[1]*I,g.fill[2]*I],intensity:t}),F.createElement(bo,Ye({fit:!!n,clip:!!n,margin:Number(n),observe:!0},l),F.createElement(ec,{radius:I,adjustCamera:n}),F.createElement(Mo,Ye({},e,{position:[0,_/2,0],onCentered:z}),i)),F.createElement("group",{position:[0,-y/2-_/2,0]},D&&F.createElement(Xo,Ye({scale:I*4,far:I,blur:2},O)),G&&F.createElement(Vo,Ye({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:I*4},O),F.createElement(zo,{amount:(f=O.amount)!==null&&f!==void 0?f:8,radius:(B=O.radius)!==null&&B!==void 0?B:I,ambient:(C=O.ambient)!==null&&C!==void 0?C:.5,intensity:(v=O.intensity)!==null&&v!==void 0?v:1,position:[g.main[0]*I,g.main[1]*I,g.main[2]*I],size:I*4,bias:-x,mapSize:E}))),s&&F.createElement(Qo,Z))}const wr=({from:i,to:e,text:n})=>{const[t,r]=F.useState(i),s=F.useRef(),a=Lr(s);return F.useEffect(()=>{const l=oi(i,e,{duration:4,ease:"easeOut",onUpdate:c=>{r(Math.floor(c))}});return()=>l.cancel},[a,i,e]),H.jsxs("div",{className:"counter",ref:s,children:[H.jsxs("h1",{children:[t,"+"]}),H.jsx("p",{children:n})]})};function tc(i){const e=Wn.useRef(),{nodes:n,materials:t,animations:r}=rt("physDesc.glb");return ar(r,e),H.jsx("group",{ref:e,...i,dispose:null,children:H.jsx("group",{name:"Sketchfab_Scene",children:H.jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],children:H.jsx("group",{name:"6a9d49e5e1f04c098a1c964a8d86547afbx",rotation:[Math.PI/2,0,0],scale:.001,children:H.jsx("group",{name:"Object_2",children:H.jsxs("group",{name:"RootNode",children:[H.jsx("group",{name:"Box001",position:[0,74.72,0],children:H.jsxs("group",{name:"Object_5",position:[0,0,-.665],children:[H.jsx("mesh",{name:"Box001_Material_#36_0",geometry:n["Box001_Material_#36_0"].geometry,material:t.Material_36}),H.jsx("mesh",{name:"Box001_Material_#37_0",geometry:n["Box001_Material_#37_0"].geometry,material:t.Material_37})]})}),H.jsx("group",{name:"Rectangle002",position:[0,60.26,0],rotation:[0,-1.571,0],children:H.jsx("group",{name:"Object_9",position:[0,-58.145,75.468],children:H.jsx("mesh",{name:"Rectangle002_Material_#38_0",geometry:n["Rectangle002_Material_#38_0"].geometry,material:t.Material_38})})}),H.jsx("group",{name:"Box004",position:[-2.15,35.115,3.731],rotation:[-Math.PI/2,0,-1.821],children:H.jsx("group",{name:"Object_12",position:[0,1.283,-.3],children:H.jsx("mesh",{name:"Box004_crayon_0",geometry:n.Box004_crayon_0.geometry,material:t.crayon})})}),H.jsx("group",{name:"Object001",position:[0,60.26,0],rotation:[0,-1.571,0],children:H.jsx("group",{name:"Object_15",position:[0,-58.145,75.468],children:H.jsx("mesh",{name:"Object001_metal_part_0",geometry:n.Object001_metal_part_0.geometry,material:t.metal_part})})})]})})})})})})}rt.preload("physDesc.glb");const nc=()=>H.jsx($n,{children:H.jsxs(F.Suspense,{fallback:"loading...",children:[H.jsx(dr,{environment:"city",children:H.jsx(tc,{})}),H.jsx(sr,{enableZoom:!1,autoRotate:!0}),H.jsx(rr,{position:[-1,0,1.8],zoom:.8,makeDefault:!0})]})});function rc(i){const e=Wn.useRef(),{nodes:n,materials:t,animations:r}=rt("physDesc.glb");return ar(r,e),H.jsx("group",{ref:e,...i,dispose:null,children:H.jsx("group",{name:"Sketchfab_Scene",children:H.jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],children:H.jsx("group",{name:"6a9d49e5e1f04c098a1c964a8d86547afbx",rotation:[Math.PI/2,0,0],scale:.001,children:H.jsx("group",{name:"Object_2",children:H.jsxs("group",{name:"RootNode",children:[H.jsx("group",{name:"Box001",position:[0,74.72,0],children:H.jsxs("group",{name:"Object_5",position:[0,0,-.665],children:[H.jsx("mesh",{name:"Box001_Material_#36_0",geometry:n["Box001_Material_#36_0"].geometry,material:t.Material_36}),H.jsx("mesh",{name:"Box001_Material_#37_0",geometry:n["Box001_Material_#37_0"].geometry,material:t.Material_37})]})}),H.jsx("group",{name:"Rectangle002",position:[0,60.26,0],rotation:[0,-1.571,0],children:H.jsx("group",{name:"Object_9",position:[0,-58.145,75.468],children:H.jsx("mesh",{name:"Rectangle002_Material_#38_0",geometry:n["Rectangle002_Material_#38_0"].geometry,material:t.Material_38})})}),H.jsx("group",{name:"Box004",position:[-2.15,35.115,3.731],rotation:[-Math.PI/2,0,-1.821],children:H.jsx("group",{name:"Object_12",position:[0,1.283,-.3],children:H.jsx("mesh",{name:"Box004_crayon_0",geometry:n.Box004_crayon_0.geometry,material:t.crayon})})}),H.jsx("group",{name:"Object001",position:[0,60.26,0],rotation:[0,-1.571,0],children:H.jsx("group",{name:"Object_15",position:[0,-58.145,75.468],children:H.jsx("mesh",{name:"Object001_metal_part_0",geometry:n.Object001_metal_part_0.geometry,material:t.metal_part})})})]})})})})})})}rt.preload("physDesc.glb");const sc=()=>H.jsx($n,{children:H.jsxs(F.Suspense,{fallback:"loading...",children:[H.jsx(dr,{environment:"city",children:H.jsx(rc,{})}),H.jsx(sr,{enableZoom:!1,autoRotate:!0}),H.jsx(rr,{position:[-1,0,1.8],zoom:.8,makeDefault:!0})]})});function ac(i){const e=Wn.useRef(),{nodes:n,materials:t,animations:r}=rt("physDesc.glb");return ar(r,e),H.jsx("group",{ref:e,...i,dispose:null,children:H.jsx("group",{name:"Sketchfab_Scene",children:H.jsx("group",{name:"Sketchfab_model",rotation:[-Math.PI/2,0,0],children:H.jsx("group",{name:"6a9d49e5e1f04c098a1c964a8d86547afbx",rotation:[Math.PI/2,0,0],scale:.001,children:H.jsx("group",{name:"Object_2",children:H.jsxs("group",{name:"RootNode",children:[H.jsx("group",{name:"Box001",position:[0,74.72,0],children:H.jsxs("group",{name:"Object_5",position:[0,0,-.665],children:[H.jsx("mesh",{name:"Box001_Material_#36_0",geometry:n["Box001_Material_#36_0"].geometry,material:t.Material_36}),H.jsx("mesh",{name:"Box001_Material_#37_0",geometry:n["Box001_Material_#37_0"].geometry,material:t.Material_37})]})}),H.jsx("group",{name:"Rectangle002",position:[0,60.26,0],rotation:[0,-1.571,0],children:H.jsx("group",{name:"Object_9",position:[0,-58.145,75.468],children:H.jsx("mesh",{name:"Rectangle002_Material_#38_0",geometry:n["Rectangle002_Material_#38_0"].geometry,material:t.Material_38})})}),H.jsx("group",{name:"Box004",position:[-2.15,35.115,3.731],rotation:[-Math.PI/2,0,-1.821],children:H.jsx("group",{name:"Object_12",position:[0,1.283,-.3],children:H.jsx("mesh",{name:"Box004_crayon_0",geometry:n.Box004_crayon_0.geometry,material:t.crayon})})}),H.jsx("group",{name:"Object001",position:[0,60.26,0],rotation:[0,-1.571,0],children:H.jsx("group",{name:"Object_15",position:[0,-58.145,75.468],children:H.jsx("mesh",{name:"Object001_metal_part_0",geometry:n.Object001_metal_part_0.geometry,material:t.metal_part})})})]})})})})})})}rt.preload("physDesc.glb");const ic=()=>H.jsx($n,{children:H.jsxs(F.Suspense,{fallback:"loading...",children:[H.jsx(dr,{environment:"city",children:H.jsx(ac,{})}),H.jsx(sr,{enableZoom:!1,autoRotate:!0}),H.jsx(rr,{position:[-1,0,1.8],zoom:.8,makeDefault:!0})]})}),oc={initial:{x:-100,y:-100,opacity:0},animate:{x:0,y:0,opacity:1,transition:{duration:1}}},Hr={initial:{x:-100,opacity:0},animate:{x:0,y:0,opacity:1,transition:{duration:1,staggerChildren:.5}}},cc=[{id:1,img:"service1.png",title:"Объяснить физику",counter:69},{id:2,img:"service2.png",title:"Объяснить математику",counter:37},{id:3,img:"service3.png",title:"Подготовить к экзаменам (ОГЭ, ЕГЭ, ДВИ, олимпиады)",counter:46}],mc=()=>{const[i,e]=F.useState(1),n=F.useRef(),t=Lr(n,{margin:"-200px"});return H.jsxs("div",{className:"services",ref:n,children:[H.jsxs("div",{className:"sSection left",children:[H.jsx(Gn.h1,{variants:oc,animate:t?"animate":"initial",className:"sTitle",children:"Чем я могу помочь?"}),H.jsx(Gn.div,{className:"serviceList",variants:Hr,animate:t?"animate":"initial",children:cc.map(r=>H.jsxs(Gn.div,{className:"service",variants:Hr,onClick:()=>e(r.id),children:[H.jsx("div",{className:"serviceIcon",children:H.jsx("img",{src:r.img,alt:""})}),H.jsxs("div",{className:"serviceInfo",children:[H.jsx("h2",{children:r.title}),H.jsxs("h3",{children:[r.counter,"+ Учеников"]})]})]},r.id))}),H.jsxs("div",{className:"counterList",children:[H.jsx(wr,{from:0,to:106,text:"Довольных учеников"}),H.jsx(wr,{from:0,to:106,text:"Довольных родителей"})]})]}),H.jsx("div",{className:"sSection right",children:i===1?H.jsx(sc,{}):i===2?H.jsx(ic,{}):H.jsx(nc,{})})]})};export{mc as default};
